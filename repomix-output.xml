This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
.github/
  agents/
    readability-reviewer.md
  prompts/
    deploy.prompt.md
    generate.prompt.md
    implement.prompt.md
    plan.prompt.md
    test.prompt.md
  skills/
    readability/
      SKILL.md
    session-log/
      SKILL.md
  copilot-instructions.md
docs/
  prompts.md
  TODO.md
git/
  .gitconfig
github/
  .github/
    copilot/
      instructions.md
    prompts/
      deploy.prompt.md
      generate.prompt.md
      implement.prompt.md
      plan.prompt.md
      test.prompt.md
scripts/
  install-prompts.sh
zsh/
  .p10k.zsh
  .zshrc
apt-packages.txt
install.sh
README.md
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path=".github/agents/readability-reviewer.md">
---
name: Readability Reviewer
description: Reviews code for readability, clarity, and simplicity using heuristic-based feedback
tools: ['read', 'search', 'agent']
infer: false
---

You are a code review specialist focused on readability and clarity. Your approach is based on one simple question: **is it easy to read?**

## Core Philosophy

You don't rely on encyclopedic knowledge of design patterns. Instead, you focus on your authentic experience as a reader of the code. When something is confusing, subtle, or unnecessarily complex, you point it out — and that's where the best improvement opportunities lie.

## Review Process

When reviewing code, apply these heuristics systematically:

### 1. Function Comprehension
- **Heuristic**: If you have to reread a function repeatedly before you understand it, that's a sign something about it is subtle, unintuitive, or overly complex.
- **Feedback**: "I had to reread this function [N] times to understand what it does. Consider [specific suggestion to simplify]."

### 2. Method Distinction
- **Heuristic**: If you get confused about where you're at in a class with multiple similar methods, that's a sign their use isn't distinct enough.
- **Feedback**: "I'm getting confused between `methodA` and `methodB` — their purposes seem to overlap. Can we make their responsibilities more distinct?"

### 3. Variable Clarity
- **Heuristic**: If you're surprised by the usage of a variable, that's a sign its scope or name isn't obvious.
- **Feedback**: "The variable `data` is used here in a way I didn't expect based on its name. Consider renaming to `userAccountData` or narrowing its scope."

### 4. Pattern Recognition
- **Heuristic**: If you see the same pattern in multiple places without a unifying structure that makes it apparent, that's a sign an abstraction like inheritance or composition might be needed.
- **Feedback**: "I notice this pattern appears in 3 different classes. Consider extracting it into [interface/base class/shared function] to make the pattern explicit."

## Review Structure

For each file you review:

1. **First Pass**: Read through naturally and note your authentic reactions
   - Where did you get confused?
   - What made you stop and reread?
   - What surprised you?

2. **Identify Friction Points**: For each confusion point, identify which heuristic applies

3. **Provide Feedback**: Structure as:
   ```
   **[File/Function Name]**
   
   **Friction Point**: [What confused you as a reader]
   
   **Suggestion**: [How to improve readability]
   
   **Example** (if helpful): [Show what it could look like]
   ```

4. **Acknowledge Good Code**: Point out what reads well too
   - "This function is immediately clear — single responsibility, obvious naming"
   - "Nice use of early returns here to reduce nesting"

## Example Review

Here's how you might review code with similar methods doing almost the same thing:

```
**File: AuditInfo.java**

**Friction Point**: The similarity between `addUserInfo`, `addTripInfo`, and `addLocationInfo` caught my attention. They look like they're doing roughly the same thing, but there's nothing in the code to enforce that pattern. This made me read each one carefully to examine the differences — that's reader friction.

**Suggestion**: Can we do something to make that pattern more explicit? These methods all seem to be adding audit fields from different domain objects.

**Example**: Consider introducing an `Auditable` interface:

\`\`\`java
public interface Auditable {
  Map<String, String> getAuditInfo();
}

public class AuditInfo {
  private Map<String, String> fields = new HashMap<>();
  
  public void add(Auditable auditable) {
    fields.putAll(auditable.getAuditInfo());
  }
}
\`\`\`

This creates better cohesion — `AuditInfo` doesn't need to know about every auditable type's fields.
```

## What You DON'T Do

- ❌ Don't cite design patterns unless they naturally emerge from readability concerns
- ❌ Don't suggest changes just to follow "best practices" — readability is the practice
- ❌ Don't be prescriptive about solutions — point out friction and collaborate
- ❌ Don't review for bugs or performance (unless they impact readability)
- ❌ Don't modify production code yourself — you provide feedback only

## Tone and Approach

- Be humble: "I'm confused here" not "This is confusing"
- Be specific: Point to exact lines/functions, not vague areas
- Be collaborative: Ask questions, suggest possibilities
- Be encouraging: This approach works at any experience level
- Admit ignorance: "I don't understand what this does" is valid and valuable feedback

## Response Format

Start with:
```
I've reviewed the code with a focus on readability. Here's my feedback:
```

Group findings by:
1. **Major Friction Points** (things that significantly impede reading)
2. **Minor Improvements** (small clarity wins)
3. **What Reads Well** (positive reinforcement)

End with:
```
These observations come from my experience as a reader. Even without suggesting specific solutions, pointing out where readers encounter friction creates opportunities for collaborative improvement.
```

## When to Activate

Respond to requests like:
- "Review my code before I push to PR"
- "Check this for readability issues"
- "Does this code make sense?"
- "Code review my changes"
- "Look at my branch and give feedback"

Focus on the reader experience. That's your superpower.
</file>

<file path=".github/skills/readability/SKILL.md">
---
name: readability
description: 'Apply readability heuristics to code. Use when reviewing code for clarity, identifying confusing patterns, suggesting simplifications, or when asked about code comprehension, function complexity, variable naming, or repeated patterns.'
---

# Readability Code Review Skill

This skill teaches agents to identify readability issues in code using heuristic-based analysis. It's based on the principle that **good code is easy to read**.

## When to Use This Skill

Use this skill when:
- Reviewing code for clarity and comprehension
- Someone asks "is this code readable?" or "does this make sense?"
- Identifying areas where readers get confused
- Suggesting simplifications without citing design patterns
- Looking for opportunities to reduce cognitive load

## Core Readability Heuristics

Apply these four heuristics systematically when reviewing code:

### 1. Function Comprehension Check

**Signal**: If you have to reread a function multiple times to understand it.

**What to Look For**:
- Functions that require 2+ reads to grasp their purpose
- Nested logic that forces mental stack management
- Functions doing multiple unrelated things
- Unclear flow of execution

**Example Feedback**:
```
I had to reread this function 3 times to understand it handles both validation 
AND database updates AND email sending. Consider splitting into separate functions 
with single, clear purposes.
```

### 2. Method Distinction Check

**Signal**: Getting confused about which method you're in or what each similar method does.

**What to Look For**:
- Multiple methods with similar names doing slightly different things
- Methods that look alike but have subtle behavioral differences
- No clear distinction in method responsibilities

**Example Feedback**:
```
I'm getting confused between `processUserData()` and `handleUserData()` — 
their names suggest overlapping purposes. Can we make their distinct 
responsibilities more obvious through naming or consolidation?
```

### 3. Variable Clarity Check

**Signal**: Being surprised by how a variable is used or what it contains.

**What to Look For**:
- Variable names that don't match their actual usage
- Variables with scope larger than necessary
- Variables that change meaning mid-function
- Generic names like `data`, `temp`, `result` used for specific purposes

**Example Feedback**:
```
The variable `data` is used as user account information, but the name doesn't 
convey that specificity. When I saw `data.email` on line 45, I had to backtrack 
to understand what `data` represents. Consider `userAccount` or `accountData`.
```

### 4. Pattern Recognition Check

**Signal**: Seeing the same code pattern repeated in multiple places without a unifying structure.

**What to Look For**:
- Similar code blocks across multiple classes/functions
- Repeated logic without abstraction
- Copy-pasted code with minor variations
- No explicit indication that these are intentionally the same pattern

**Example Feedback**:
```
I notice this field extraction pattern appears in 3 different classes:
- UserAuditInfo.add()
- TripAuditInfo.add()  
- LocationAuditInfo.add()

Each does nearly identical map population. Consider introducing an `Auditable` 
interface to make this pattern explicit and reduce the places it needs updating.
```

## Application Process

When reviewing code with this skill:

1. **Read naturally** - Don't try to be smart, just read the code normally
2. **Note your reactions** - Where did you pause? What surprised you? What required rereading?
3. **Match to heuristics** - Connect each friction point to one of the four heuristics
4. **Provide specific feedback** - Point to exact lines/sections and explain the friction

## Example Code Reviews

### Example 1: Repeated Pattern Without Structure

**Code**:
```java
public class AuditInfo {
  private Map<String, String> fields = new HashMap<>();

  public void addUserInfo(User user) {
    fields.put("name", user.getName());
    fields.put("userId", user.getId());
  }
  
  public void addTripInfo(Trip trip) {
    fields.put("tripId", trip.getId());
    fields.put("tripStartTime", trip.getStartTime().toString());
    fields.put("tripEndTime", trip.getEndTime().toString());
    fields.put("tripDestination", trip.getDestinationId());
  }
  
  public void addLocationInfo(Location location) {
    fields.put("locationId", location.getId());
  }
}
```

**Review Using Heuristic #4** (Pattern Recognition):
```
**Friction Point**: The three `add*Info` methods caught my attention. They look 
like they're doing roughly the same thing (adding fields to a map), but there's 
nothing in the code to enforce that pattern. This made me read each one carefully 
to check for differences — that's reader friction.

**Suggestion**: Can we make the pattern more explicit? All three methods are 
extracting audit fields from domain objects.

**Example Refactor**:
```java
public interface Auditable {
  Map<String, String> getAuditInfo();
}

public class AuditInfo {
  private Map<String, String> fields = new HashMap<>();
  
  public void add(Auditable auditable) {
    fields.putAll(auditable.getAuditInfo());
  }
}

// User, Trip, and Location implement Auditable
```

This eliminates the reader friction — now it's clear these are all the same 
operation, and `AuditInfo` doesn't need to know about specific types.
```

### Example 2: Variable Scope Confusion

**Code**:
```python
def process_orders(orders):
    data = []
    for order in orders:
        data.append(order.id)
    
    data = calculate_totals(data)
    
    for i in range(len(data)):
        data[i] = apply_discount(data[i])
    
    return data
```

**Review Using Heuristic #3** (Variable Clarity):
```
**Friction Point**: The variable `data` changes meaning three times in this 
function. First it's a list of order IDs, then it becomes totals, then discounted 
totals. Each time I see `data`, I have to track which transformation we're on.

**Suggestion**: Use distinct variable names that reflect the actual data at each 
stage:

```python
def process_orders(orders):
    order_ids = [order.id for order in orders]
    totals = calculate_totals(order_ids)
    discounted_totals = [apply_discount(total) for total in totals]
    return discounted_totals
```

Now each variable tells me exactly what it contains without backtracking.
```

## Feedback Format Guidelines

When providing readability feedback:

**DO**:
- ✅ Point to specific lines/sections
- ✅ Explain your reading experience ("I got confused...", "I had to reread...")
- ✅ Ask questions when uncertain ("Can we make this more distinct?")
- ✅ Provide concrete examples when helpful
- ✅ Note what reads well, not just problems

**DON'T**:
- ❌ Cite design patterns unless they emerge naturally from readability concerns
- ❌ Make it about "best practices" — readability IS the practice
- ❌ Be prescriptive — collaborate, don't dictate solutions
- ❌ Review for bugs or performance (unless they impact readability)
- ❌ Focus only on problems — acknowledge clear, readable code too

## Response Structure

Use this structure for readability reviews:

```markdown
## Readability Review

### Major Friction Points
[Significant areas where reading was difficult]

### Minor Improvements  
[Small clarity wins that would help]

### What Reads Well
[Code that was immediately clear and well-structured]

### Summary
[Overall readability assessment and key takeaways]
```

## Tone and Collaboration

- **Be humble**: "I'm confused here" not "This is confusing"
- **Be specific**: Exact lines/functions, not vague areas
- **Be collaborative**: Suggest possibilities, don't prescribe solutions
- **Be encouraging**: Readability review works at all experience levels
- **Admit ignorance**: "I don't understand this" is valuable feedback

## Integration with Code Review Workflows

This skill works best when:
- Applied before pushing code to PR
- Used alongside functional testing
- Focused on reader experience rather than correctness
- Part of iterative refinement, not one-shot criticism

## Remember

Good code review isn't about encyclopedic knowledge of patterns. It's about honest 
reactions to the reading experience. When readers encounter friction, that's an 
opportunity for collaborative improvement — and that's what this skill helps identify.
</file>

<file path=".github/skills/session-log/SKILL.md">
---
name: session-log
description: 'Create structured session logs for AI coding/chat sessions. Use when starting a new development session, tracking decisions and context, documenting troubleshooting, or preserving conversation history for future reference.'
---

# Session Log Skill

This skill teaches agents to create well-structured session logs that capture the context, decisions, and outcomes of AI-assisted development sessions. Session logs serve as breadcrumbs for future developers (including future you) to understand *why* decisions were made.

## When to Use This Skill

Use this skill when:
- Starting a new coding/chat session with specific goals
- Making architectural or design decisions that need documentation
- Troubleshooting complex issues with multiple attempted solutions
- Learning something new that should be preserved for reference
- Wrapping up a session and wanting to capture what was accomplished
- Creating audit trails for important changes

## Core Principles

**Session logs are NOT application logs**: They capture human-AI collaboration context, not system events. Think "meeting notes" not "server logs".

**Focus on "why" not "what"**: Code diffs show *what* changed. Session logs explain *why* it changed, what alternatives were considered, and what was learned.

**Structure enables searchability**: Consistent format makes logs searchable and parseable. Use markdown + frontmatter for maximum compatibility.

**Context is king**: Future readers lack your current context. Include enough detail to reconstruct your thought process months later.

## Session Log File Structure

### Directory Location

Create session logs in: `.github/sessions/`

**Why this location?**
- `.github/` - Already used for repo metadata (workflows, agents, skills)
- `sessions/` - Clear purpose, separate from other .github/ content
- Included in git - Session logs are documentation, not secrets
- Searchable - Can grep across all sessions for patterns

### Filename Format

Use ISO 8601 timestamp format: `YYYY-MM-DDTHH-MM-SSZ.md`

**Examples**:
- `2026-02-08T15-30-00Z.md` (February 8, 2026, 3:30 PM UTC)
- `2026-02-08T09-15-30Z.md` (February 8, 2026, 9:15:30 AM UTC)

**Why this format?**
- **Sortable**: Alphabetical sorting = chronological order
- **Unambiguous**: ISO 8601 is universally understood
- **Collision-resistant**: Down-to-second precision prevents overwrites
- **Tool-friendly**: No spaces or special chars, easy to parse

**Generate timestamp** (in bash):
```bash
date -u +"%Y-%m-%dT%H-%M-%SZ"
```

### File Format Template

```markdown
---
session_id: <unique-identifier>
started: <ISO-8601-timestamp>
ended: <ISO-8601-timestamp-or-ongoing>
participants: [human, ai-agent-name]
tags: [feature-name, bug-fix, refactoring, learning, etc]
status: ongoing | completed | abandoned
---

# Session: <Brief descriptive title>

## Goal

<What you're trying to accomplish in 1-3 sentences>

## Context

### Starting State
- **Current situation**: <What exists now>
- **Problem/need**: <What prompted this session>
- **Prior attempts**: <What's been tried before, if any>

### Environment
- **Branch**: <git branch name>
- **Tools**: <Relevant tools/frameworks/versions>
- **Files involved**: <Key files to be modified/created>

## Conversation Log

### <Timestamp> - <Topic/Phase>

**Discussion**:
<What was discussed, questions asked, alternatives considered>

**Decision**:
<What was decided and why>

**Action**:
<What was done (code written, commands run, files created)>

**Outcome**:
<What happened as a result>

---

*(Repeat this pattern for each major phase of the session)*

## Key Decisions

### Decision 1: <Brief title>
- **Question**: <What needed deciding>
- **Options**: <What alternatives were considered>
- **Choice**: <What was chosen>
- **Rationale**: <Why this option was best>
- **Trade-offs**: <What was sacrificed>

*(Repeat for each major decision)*

## Challenges & Solutions

### Challenge 1: <Brief description>
- **Problem**: <What went wrong>
- **Attempted solutions**: <What didn't work>
- **Final solution**: <What worked>
- **Lesson learned**: <Key takeaway>

## Artifacts Created

- [ ] `path/to/file.ext` - <Purpose/description>
- [ ] `another/file.ext` - <Purpose/description>
- [ ] Agent/skill: `.github/agents/name.md` - <Purpose>

## Next Steps

- [ ] <Immediate follow-up task>
- [ ] <Testing needed>
- [ ] <Documentation to update>
- [ ] <Future improvements to consider>

## References

- Related sessions: `YYYY-MM-DDTHH-MM-SSZ.md`
- Issues/PRs: #123, #456
- Related Commits: [If branch information and commit history is readily available via git]
- Documentation: [Link to relevant docs]
- External resources: [Helpful articles/guides]

## Summary

<2-3 sentence summary of what was accomplished and learned>

---

**Total session time**: <X hours Y minutes>  
**Status**: <completed | ongoing | abandoned>  
**Outcome**: <success | partial | blocked>
```

## Session Log Best Practices

### DO ✅

**Include session metadata** in frontmatter:
- Unique session ID (UUID or timestamp)
- Start/end timestamps
- Participants (human username, AI agent name)
- Status tracking (ongoing/completed/abandoned)
- Tags for categorization

**Capture decision context**:
- What options were considered
- Why each option was rejected
- Trade-offs made
- Assumptions that influenced the decision

**Log errors and failures**:
- What didn't work
- Why it failed
- How you debugged it
- What you learned

**Track time spent**:
- Session duration
- Time on different phases
- Helps estimate future work

**Link related artifacts**:
- Code files created/modified
- PRs/issues opened
- Related session logs
- External documentation

**Write for future you**:
- Assume you'll forget all context in 6 months
- Explain acronyms and project-specific terms
- Include enough detail to reproduce decisions

**Update logs in real-time**:
- Don't wait until the end of the session
- Capture thoughts while fresh
- It's easier than reconstructing later

### DON'T ❌

**Don't log code directly**:
- Link to files/commits instead
- Code belongs in version control, not logs
- Exception: Small snippets (< 10 lines) to illustrate a point

**Don't log sensitive data**:
- No API keys, passwords, tokens
- No PII (personally identifiable information)
- No customer data
- Use placeholders: `<REDACTED>`, `<API_KEY>`

**Don't duplicate what git already tracks**:
- Commit messages explain what changed
- Session logs explain why and how you decided

**Don't write novels**:
- Be concise but complete
- Bullet points over paragraphs
- Focus on decisions and outcomes, not play-by-play

**Don't skip the "why"**:
- "Added feature X" is useless
- "Added feature X because Y users requested it and Z data showed need" is valuable

## Structured Logging for AI Sessions

When logging AI-assisted sessions specifically:

### Conversation Tracking

**Track the flow of ideas**:
```markdown
### 14:30 - Initial approach discussion

**Human**: How should we structure the authentication system?

**AI suggested**: Three approaches:
1. JWT with Redis sessions (fast, scalable)
2. Traditional server-side sessions (simple, proven)
3. Stateless JWT-only (minimal infrastructure)

**Human concern**: Redis adds operational complexity

**AI recommendation**: Option 2 for MVP, migrate to Option 1 when scale demands

**Decision**: Server-side sessions with cookie storage
**Rationale**: Prioritizing simplicity for initial launch, can optimize later

**Implementation**:
- Created `auth/session-manager.ts`
- Added session middleware to Express app
- Configured secure cookie settings
```

### Tool/MCP Usage

**Log tool invocations when they matter**:
```markdown
### 15:45 - Debugging deployment failure

**Command run**: `kubectl get pods -n production`
**Output**: 3/5 pods in CrashLoopBackOff
**Inference**: Recent config change broke pod startup

**Command run**: `kubectl logs <pod-name>`
**Key error**: `ECONNREFUSED connecting to Redis`
**Root cause**: Redis connection string format changed in v2.0

**Fix applied**: Updated `REDIS_URL` format in secrets
**Verification**: All pods healthy after rollout
```

### Learning Capture

**Document insights gained**:
```markdown
## Key Learnings

### TypeScript Generic Constraints
**Context**: Struggled with typing a utility function
**Discovery**: Can use `extends` to constrain generic types
**Example**: `function process<T extends Identifiable>(item: T)` 
**Source**: [TypeScript Handbook - Generics](https://...)
**Apply to**: Similar utility functions across codebase

### Docker Build Optimization
**Problem**: 8-minute build times
**Solution**: Multi-stage builds + layer caching
**Result**: Down to 90 seconds
**Key insight**: Order Dockerfile commands by change frequency
```

## Session Categories & Tags

Use consistent tags for easier searching:

**By Activity Type**:
- `feature-development` - Building new functionality
- `bug-fix` - Resolving defects
- `refactoring` - Restructuring existing code
- `debugging` - Investigating issues
- `learning` - Educational/exploratory session
- `architecture` - System design decisions
- `code-review` - Reviewing changes
- `documentation` - Writing/updating docs
- `deployment` - Release and operations work

**By Domain**:
- `frontend`, `backend`, `infrastructure`, `database`
- `authentication`, `payments`, `notifications`
- `performance`, `security`, `testing`

**By Outcome**:
- `completed` - Goals achieved
- `partial` - Some progress made
- `blocked` - Hit a blocker
- `research` - Gathered information

## Automation Helpers

### Quick Session Start

Create a helper function in your shell:

```bash
# Add to ~/.zshrc or ~/.bashrc
new-session() {
  local session_dir=".github/sessions"
  local timestamp=$(date -u +"%Y-%m-%dT%H-%M-%SZ")
  local session_file="$session_dir/$timestamp.md"
  
  mkdir -p "$session_dir"
  
  cat > "$session_file" << EOF
---
session_id: $timestamp
started: $(date -u +"%Y-%m-%dT%H:%M:%SZ")
ended: ongoing
participants: [human, copilot]
tags: []
status: ongoing
---

# Session: <Title>

## Goal

<What you're trying to accomplish>

## Context

### Starting State
- **Current situation**: 
- **Problem/need**: 
- **Prior attempts**: 

### Environment
- **Branch**: 
- **Tools**: 
- **Files involved**: 

## Conversation Log

### $(date -u +"%H:%M") - Initial setup

**Discussion**:

**Decision**:

**Action**:

**Outcome**:

EOF

  echo "Created session log: $session_file"
  ${EDITOR:-code} "$session_file"  # Or your editor of choice
}
```

### Session Summary Generator

Ask your AI agent to generate a summary:

```
@agent Generate a summary of this session based on our conversation. Include:
- What we were trying to accomplish
- Key decisions made and why
- What was built/changed
- Any blockers or open questions
- Next steps

Format it as a session log entry using the session-log skill template.
```

## Searching Session Logs

**Find sessions by tag**:
```bash
grep -r "tags:.*authentication" .github/sessions/
```

**Find sessions working on specific files**:
```bash
grep -r "auth/session-manager.ts" .github/sessions/
```

**Find all debugging sessions**:
```bash
grep -r "status: completed" .github/sessions/ | grep "debugging"
```

**List recent sessions**:
```bash
ls -lt .github/sessions/ | head -10
```

## Integration with Agents

When creating a session-log-aware agent:

```markdown
---
name: session-logger
description: Helps create and maintain session logs for development work
tools: ['edit', 'read']
---

You are a session logging specialist. When users start or wrap up sessions:

1. **Session start**: Create a new session log file using the template
2. **During session**: Help update the log with decisions, challenges, learnings
3. **Session end**: Generate summary, mark status as completed, calculate duration
4. **Session search**: Help find relevant past sessions by tag, file, or topic

Always use the session-log skill's template and best practices.
```

## Remember

Session logs are **investments in future productivity**. They take 5-10 minutes to maintain but save hours of "why did we do this?" confusion later.

The goal isn't perfect documentation - it's **just enough context** to make future work faster and better informed.
</file>

<file path="docs/TODO.md">
# Dotfiles Improvement TODO

Priority-ordered checklist for evolving this dotfiles repository.

## High Priority (Do First)

### P0: Critical Cleanup
- [ ] **Remove redundant directories**
  - [ ] Delete `github/.github/prompts/` (canonical templates - no longer needed)
  - [ ] Delete `.github/prompts/` (example outputs - cluttering repo)
  - [ ] Delete `docs/prompts.md` (outdated prompt documentation)
  - [ ] Clean up any `.bak` files from testing

- [ ] **Git configuration**
  - [ ] Create `git/.gitconfig` template with sensible defaults
  - [ ] Add symlinking logic in `install.sh` for `.gitconfig`
  - [ ] Document git config customization in README

- [ ] **VS Code configuration**
  - [ ] Create `vscode/settings.json` with baseline settings
  - [ ] Create `vscode/keybindings.json` if needed
  - [ ] Add VS Code config deployment to `install.sh`
  - [ ] Test in fresh Codespace

### P1: Agent/Skill Ecosystem Foundation
- [ ] **Create dotfiles maintenance agent** (`.github/agents/dotfiles-maintainer.md`)
  - [ ] Agent that helps update/maintain this dotfiles repo itself
  - [ ] Can review install.sh changes for safety
  - [ ] Can suggest improvements to shell configs
  - [ ] Uses `readability` skill for script review

- [ ] **Create shell-scripting skill** (`.github/skills/shell-scripting/SKILL.md`)
  - [ ] Best practices for bash scripts
  - [ ] Common patterns (checking commands, backups, idempotency)
  - [ ] Error handling templates
  - [ ] Include example scripts

- [ ] **Flesh out workspace-specific agent generation strategy**
  - [ ] Research: Best approach for generating per-repo agents
  - [ ] Decide: Modify `/generate` prompt system or create new agent?
  - [ ] Design: Input (repo context) → Output (custom agent.md)
  - [ ] Prototype: Test in one workspace
  - [ ] Document: Add workflow to README

### P2: Documentation & Testing
- [ ] **Update README.md** with new philosophy (see part D below)
  
- [ ] **Create testing checklist**
  - [ ] Test fresh Codespace creation
  - [ ] Test local macOS install
  - [ ] Test re-running install.sh (idempotency)
  - [ ] Test with missing dependencies (no curl, no git)
  
- [ ] **Add troubleshooting guide**
  - [ ] Common errors and solutions
  - [ ] How to check logs in Codespaces
  - [ ] How to manually fix failed installs

## Medium Priority (Do Next)

### P3: Configuration Enhancements
- [ ] **Expand git configuration**
  - [ ] Add git aliases
  - [ ] Add commit message templates
  - [ ] Add merge/diff tools configuration
  
- [ ] **Enhance zsh configuration**
  - [ ] Add useful aliases
  - [ ] Add custom functions
  - [ ] Add environment variable templates
  - [ ] Document customization approach

- [ ] **VS Code extensions**
  - [ ] Create recommended extensions list
  - [ ] Auto-install critical extensions in Codespaces?
  - [ ] Document manual vs automatic approach

### P4: Agent/Skill Expansion
- [ ] **Create additional universal skills**
  - [ ] `git-workflow` - Git best practices and patterns
  - [ ] `markdown-editing` - Markdown formatting standards
  - [ ] `documentation` - How to document code/repos
  
- [ ] **Create specialized agents for common tasks**
  - [ ] `config-reviewer` - Reviews dotfiles changes
  - [ ] `environment-debugger` - Helps debug shell/env issues

### P5: Developer Experience
- [ ] **Add installation progress indicators**
  - [ ] Better visual feedback during install
  - [ ] Estimated time remaining?
  - [ ] Spinners for long-running operations
  
- [ ] **Create quick-start script**
  - [ ] `bootstrap.sh` that curl-pipes for one-command install
  - [ ] Similar to felipecrs/dotfiles approach
  - [ ] Add to README

- [ ] **Logging improvements**
  - [ ] Write detailed logs to `~/.dotfiles.log`
  - [ ] Capture errors separately
  - [ ] Add debug mode (`DOTFILES_DEBUG=1`)

## Low Priority (Future Nice-to-Haves)

### P6: Advanced Features
- [ ] **Conditional configuration**
  - [ ] Detect repo type (Python, Node, Go, etc.)
  - [ ] Load language-specific configs
  - [ ] Optional: MCP integration

- [ ] **Cross-environment sync**
  - [ ] Personal Codespaces vs work Codespaces
  - [ ] Strategy for environment-specific overrides
  - [ ] Document the pattern (don't implement in this repo)

- [ ] **Dotfiles CI/CD**
  - [ ] GitHub Actions to validate install.sh
  - [ ] Shellcheck linting
  - [ ] Test in Docker container
  - [ ] Auto-generate skill from code changes?

### P7: Community & Sharing
- [ ] **Make repo a template**
  - [ ] Create GitHub template repo
  - [ ] Add template-specific README
  - [ ] Include customization guide

- [ ] **Contribution guidelines**
  - [ ] How others can suggest improvements
  - [ ] What kinds of contributions are welcome
  - [ ] How to test changes

- [ ] **Example configurations**
  - [ ] Create `examples/` directory
  - [ ] Add language-specific examples
  - [ ] Add workflow-specific examples

## Research & Exploration Tasks

### R1: Agent/Skill Architecture
- [ ] **Study best practices for agent/skill hierarchies**
  - [ ] Read GitHub Copilot agent documentation thoroughly
  - [ ] Study awesome-copilot examples
  - [ ] Study anthropics/skills examples
  - [ ] Document findings in new `docs/agent-architecture.md`

- [ ] **Prototype workspace-specific agent generation**
  - [ ] Create proof-of-concept agent that generates other agents
  - [ ] Test with 2-3 different repo types
  - [ ] Document what works and what doesn't
  - [ ] Decide: Is this better than prompts for per-repo customization?

### R2: Codespaces Optimization
- [ ] **Research Codespaces best practices**
  - [ ] Official GitHub docs on dotfiles
  - [ ] Community examples (awesome-dotfiles)
  - [ ] Performance optimization techniques
  - [ ] Secret management strategies

- [ ] **Investigate devcontainer.json integration**
  - [ ] Can dotfiles + devcontainer.json work together?
  - [ ] Should some config move to devcontainer?
  - [ ] Document the boundary between them

### R3: Alternative Approaches
- [ ] **Evaluate dotfiles managers**
  - [ ] Try chezmoi, stow, yadm
  - [ ] Document pros/cons vs bare repo
  - [ ] Decide: Is added complexity worth it?
  - [ ] Keep current approach unless compelling reason to change

## Deprecation / Removal Candidates

### D1: Remove Unused Features
- [ ] **Audit current files**
  - [ ] Identify unused configurations
  - [ ] Remove or document "why kept but not used"
  
- [ ] **Simplify install-prompts.sh**
  - [ ] Current script only handles /generate
  - [ ] Either expand to handle agents/skills or rename to reflect scope
  - [ ] Consider: Should agents/skills be symlinked or copied?

## Notes
- This TODO is a living document - update as priorities shift
- Mark items complete with `[x]` and date: `- [x] Task description (2026-01-15)`
- Move completed items to a separate `DONE.md` file periodically
- Review and re-prioritize monthly
</file>

<file path="git/.gitconfig">

</file>

<file path="github/.github/copilot/instructions.md">

</file>

<file path="github/.github/prompts/deploy.prompt.md">
---
name: deploy
description: Create a deployment checklist and summary
argument-hint: "goal, target, services, credentials, verification"
---

# Deploy Prompt Template

## Goal
${input:goal}

## Inputs
- Deployment target: ${input:target}
- Services/components: ${input:services}
- Required credentials/vars: ${input:credentials}

## Steps
1. ${input:verify_step}
2. ${input:deploy_step}
3. ${input:health_step}
4. ${input:rollback_step}

## Output Format
- Summary: ${input:summary}
- Commands Run:
  - ${input:command_1}
  - ${input:command_2}
- Verification:
  - ${input:verification}
- Citations: ${input:citations}
</file>

<file path="github/.github/prompts/generate.prompt.md">
---
name: generate
description: Generate repo-specific prompt templates for this repo
---

# Prompt Generator Instructions

Running `/generate` orchestrates multiple subagents (discovery, template copying, content generation) to scaffold repo-specific prompts. Coordinate them to perform the workflow below.

## Workflow
1. **Locate workspace** — Discover or confirm the active repository path (use explicit args, env vars, or detect from open files). Ensure the repo is writable and contains/creates a `.github/prompts/` folder.
2. **Find dotfiles source** — Detect the dotfiles installation directory (default `$HOME/dotfiles`; also check `DOTFILES_DIR` or other exported hints). Verify that `github/.github/prompts/*.prompt.md` exists there.
3. **Copy canonical templates** — For each template (`plan`, `implement`, `test`, `deploy`), copy the canonical file from the dotfiles repo into the target repo's `.github/prompts/` before editing. Create the destination directory if missing.
4. **Fill templates** — Launch dedicated subagents for each prompt:
	- subagent A edits `.github/prompts/plan.prompt.md`
	- subagent B edits `.github/prompts/implement.prompt.md`
	- subagent C edits `.github/prompts/test.prompt.md`
	- subagent D edits `.github/prompts/deploy.prompt.md`

	Each subagent must gather repository context (file listings, commands, config files) and replace only the placeholder regions inside the template. Keep existing headings (`Goal`, `Inputs`, `Steps`, `Output Format`) and cite concrete files or commands from the repo.
5. **Validate & report** — Confirm all four files exist in the target repo with updated content and summarize what changed.

## Output
Return the four filled templates (one per subagent) with placeholders replaced by concrete repo-specific data and citations. Mention if additional helper subagents (e.g., file discovery, template copier) were used.

## Post-generation
Instruct the user to rerun `./install.sh` from the dotfiles repo so the updated prompts sync for future sessions (the script calls `scripts/install-prompts.sh` internally).
</file>

<file path="github/.github/prompts/implement.prompt.md">
---
name: implement
description: Implement a requested change with file-level details
argument-hint: "goal, targets, behavior, criteria, steps, tests"
---

# Implement Prompt Template

## Goal
${input:goal}

## Inputs
- Target files/modules: ${input:targets}
- Existing behavior: ${input:existing_behavior}
- Acceptance criteria: ${input:acceptance_criteria}

## Steps
1. ${input:inspect_step}
2. ${input:modify_step}
3. ${input:update_step}
4. ${input:validate_step}

## Output Format
- Summary: ${input:summary}
- Changes:
  - ${input:change_1}
  - ${input:change_2}
- Tests/Checks:
  - ${input:test_command}
- Citations: ${input:citations}
</file>

<file path="github/.github/prompts/plan.prompt.md">
---
name: plan
description: Create a repo-specific plan
argument-hint: "goal, context, requirements, constraints"
---

# Plan Prompt Template

## Goal
${input:goal}

## Inputs
- Repo context: ${input:context}
- Requirements: ${input:requirements}
- Constraints: ${input:constraints}

## Steps
1. ${input:inspect_step}
2. ${input:impact_step}
3. ${input:plan_step}
4. ${input:risk_step}

## Output Format
- Summary: ${input:summary}
- Tasks:
  - ${input:task_1}
  - ${input:task_2}
- Risks/Notes: ${input:risks}
- Citations: ${input:citations}
</file>

<file path="github/.github/prompts/test.prompt.md">
---
name: test
description: Plan and report test execution for a change
argument-hint: "scope, commands, environment, results"
---

# Test Prompt Template

## Goal
${input:goal}

## Inputs
- Test scope: ${input:scope}
- Commands available: ${input:commands}
- Environment notes: ${input:environment}

## Steps
1. ${input:identify_step}
2. ${input:run_step}
3. ${input:summary_step}
4. ${input:failure_step}

## Output Format
- Summary: ${input:summary}
- Commands Run:
  - ${input:command_1}
  - ${input:command_2}
- Results:
  - ${input:results}
- Citations: ${input:citations}
</file>

<file path="zsh/.p10k.zsh">
# Generated by Powerlevel10k configuration wizard on 2025-12-06 at 18:29 EST.
# Based on romkatv/powerlevel10k/config/p10k-lean.zsh, checksum 37983.
# Wizard options: compatible, unicode, lean, 12h time, 2 lines, dotted, left frame,
# dark-ornaments, sparse, concise, transient_prompt, instant_prompt=verbose.
# Type `p10k configure` to generate another config.
#
# Config for Powerlevel10k with lean prompt style. Type `p10k configure` to generate
# your own config based on it.
#
# Tip: Looking for a nice color? Here's a one-liner to print colormap.
#
#   for i in {0..255}; do print -Pn "%K{$i}  %k%F{$i}${(l:3::0:)i}%f " ${${(M)$((i%6)):#3}:+$'\n'}; done

# Temporarily change options.
'builtin' 'local' '-a' 'p10k_config_opts'
[[ ! -o 'aliases'         ]] || p10k_config_opts+=('aliases')
[[ ! -o 'sh_glob'         ]] || p10k_config_opts+=('sh_glob')
[[ ! -o 'no_brace_expand' ]] || p10k_config_opts+=('no_brace_expand')
'builtin' 'setopt' 'no_aliases' 'no_sh_glob' 'brace_expand'

() {
  emulate -L zsh -o extended_glob

  # Unset all configuration options. This allows you to apply configuration changes without
  # restarting zsh. Edit ~/.p10k.zsh and type `source ~/.p10k.zsh`.
  unset -m '(POWERLEVEL9K_*|DEFAULT_USER)~POWERLEVEL9K_GITSTATUS_DIR'

  # Zsh >= 5.1 is required.
  [[ $ZSH_VERSION == (5.<1->*|<6->.*) ]] || return

  # The list of segments shown on the left. Fill it with the most important segments.
  typeset -g POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(
    # =========================[ Line #1 ]=========================
    # os_icon               # os identifier
    dir                     # current directory
    vcs                     # git status
    # =========================[ Line #2 ]=========================
    newline                 # \n
    prompt_char             # prompt symbol
  )

  # The list of segments shown on the right. Fill it with less important segments.
  # Right prompt on the last prompt line (where you are typing your commands) gets
  # automatically hidden when the input line reaches it. Right prompt above the
  # last prompt line gets hidden if it would overlap with left prompt.
  typeset -g POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(
    # =========================[ Line #1 ]=========================
    status                  # exit code of the last command
    command_execution_time  # duration of the last command
    background_jobs         # presence of background jobs
    direnv                  # direnv status (https://direnv.net/)
    asdf                    # asdf version manager (https://github.com/asdf-vm/asdf)
    virtualenv              # python virtual environment (https://docs.python.org/3/library/venv.html)
    anaconda                # conda environment (https://conda.io/)
    pyenv                   # python environment (https://github.com/pyenv/pyenv)
    goenv                   # go environment (https://github.com/syndbg/goenv)
    nodenv                  # node.js version from nodenv (https://github.com/nodenv/nodenv)
    nvm                     # node.js version from nvm (https://github.com/nvm-sh/nvm)
    nodeenv                 # node.js environment (https://github.com/ekalinin/nodeenv)
    # node_version          # node.js version
    # go_version            # go version (https://golang.org)
    # rust_version          # rustc version (https://www.rust-lang.org)
    # dotnet_version        # .NET version (https://dotnet.microsoft.com)
    # php_version           # php version (https://www.php.net/)
    # laravel_version       # laravel php framework version (https://laravel.com/)
    # java_version          # java version (https://www.java.com/)
    # package               # name@version from package.json (https://docs.npmjs.com/files/package.json)
    rbenv                   # ruby version from rbenv (https://github.com/rbenv/rbenv)
    rvm                     # ruby version from rvm (https://rvm.io)
    fvm                     # flutter version management (https://github.com/leoafarias/fvm)
    luaenv                  # lua version from luaenv (https://github.com/cehoffman/luaenv)
    jenv                    # java version from jenv (https://github.com/jenv/jenv)
    plenv                   # perl version from plenv (https://github.com/tokuhirom/plenv)
    perlbrew                # perl version from perlbrew (https://github.com/gugod/App-perlbrew)
    phpenv                  # php version from phpenv (https://github.com/phpenv/phpenv)
    scalaenv                # scala version from scalaenv (https://github.com/scalaenv/scalaenv)
    haskell_stack           # haskell version from stack (https://haskellstack.org/)
    kubecontext             # current kubernetes context (https://kubernetes.io/)
    terraform               # terraform workspace (https://www.terraform.io)
    # terraform_version     # terraform version (https://www.terraform.io)
    aws                     # aws profile (https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html)
    aws_eb_env              # aws elastic beanstalk environment (https://aws.amazon.com/elasticbeanstalk/)
    azure                   # azure account name (https://docs.microsoft.com/en-us/cli/azure)
    gcloud                  # google cloud cli account and project (https://cloud.google.com/)
    google_app_cred         # google application credentials (https://cloud.google.com/docs/authentication/production)
    toolbox                 # toolbox name (https://github.com/containers/toolbox)
    context                 # user@hostname
    nordvpn                 # nordvpn connection status, linux only (https://nordvpn.com/)
    ranger                  # ranger shell (https://github.com/ranger/ranger)
    yazi                    # yazi shell (https://github.com/sxyazi/yazi)
    nnn                     # nnn shell (https://github.com/jarun/nnn)
    lf                      # lf shell (https://github.com/gokcehan/lf)
    xplr                    # xplr shell (https://github.com/sayanarijit/xplr)
    vim_shell               # vim shell indicator (:sh)
    midnight_commander      # midnight commander shell (https://midnight-commander.org/)
    nix_shell               # nix shell (https://nixos.org/nixos/nix-pills/developing-with-nix-shell.html)
    chezmoi_shell           # chezmoi shell (https://www.chezmoi.io/)
    # vpn_ip                # virtual private network indicator
    # load                  # CPU load
    # disk_usage            # disk usage
    # ram                   # free RAM
    # swap                  # used swap
    todo                    # todo items (https://github.com/todotxt/todo.txt-cli)
    timewarrior             # timewarrior tracking status (https://timewarrior.net/)
    taskwarrior             # taskwarrior task count (https://taskwarrior.org/)
    per_directory_history   # Oh My Zsh per-directory-history local/global indicator
    # cpu_arch              # CPU architecture
    time                    # current time
    # =========================[ Line #2 ]=========================
    newline
    # ip                    # ip address and bandwidth usage for a specified network interface
    # public_ip             # public IP address
    # proxy                 # system-wide http/https/ftp proxy
    # battery               # internal battery
    # wifi                  # wifi speed
    # example               # example user-defined segment (see prompt_example function below)
  )

  # Defines character set used by powerlevel10k. It's best to let `p10k configure` set it for you.
  typeset -g POWERLEVEL9K_MODE=compatible
  # When set to `moderate`, some icons will have an extra space after them. This is meant to avoid
  # icon overlap when using non-monospace fonts. When set to `none`, spaces are not added.
  typeset -g POWERLEVEL9K_ICON_PADDING=none

  # Basic style options that define the overall look of your prompt. You probably don't want to
  # change them.
  typeset -g POWERLEVEL9K_BACKGROUND=                            # transparent background
  typeset -g POWERLEVEL9K_{LEFT,RIGHT}_{LEFT,RIGHT}_WHITESPACE=  # no surrounding whitespace
  typeset -g POWERLEVEL9K_{LEFT,RIGHT}_SUBSEGMENT_SEPARATOR=' '  # separate segments with a space
  typeset -g POWERLEVEL9K_{LEFT,RIGHT}_SEGMENT_SEPARATOR=        # no end-of-line symbol

  # When set to true, icons appear before content on both sides of the prompt. When set
  # to false, icons go after content. If empty or not set, icons go before content in the left
  # prompt and after content in the right prompt.
  #
  # You can also override it for a specific segment:
  #
  #   POWERLEVEL9K_STATUS_ICON_BEFORE_CONTENT=false
  #
  # Or for a specific segment in specific state:
  #
  #   POWERLEVEL9K_DIR_NOT_WRITABLE_ICON_BEFORE_CONTENT=false
  typeset -g POWERLEVEL9K_ICON_BEFORE_CONTENT=true

  # Add an empty line before each prompt.
  typeset -g POWERLEVEL9K_PROMPT_ADD_NEWLINE=true

  # Connect left prompt lines with these symbols.
  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX='%240F╭─'
  typeset -g POWERLEVEL9K_MULTILINE_NEWLINE_PROMPT_PREFIX='%240F├─'
  typeset -g POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX='%240F╰─'
  # Connect right prompt lines with these symbols.
  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_SUFFIX=
  typeset -g POWERLEVEL9K_MULTILINE_NEWLINE_PROMPT_SUFFIX=
  typeset -g POWERLEVEL9K_MULTILINE_LAST_PROMPT_SUFFIX=

  # The left end of left prompt.
  typeset -g POWERLEVEL9K_LEFT_PROMPT_FIRST_SEGMENT_START_SYMBOL=' '
  # The right end of right prompt.
  typeset -g POWERLEVEL9K_RIGHT_PROMPT_LAST_SEGMENT_END_SYMBOL=

  # Ruler, a.k.a. the horizontal line before each prompt. If you set it to true, you'll
  # probably want to set POWERLEVEL9K_PROMPT_ADD_NEWLINE=false above and
  # POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_CHAR=' ' below.
  typeset -g POWERLEVEL9K_SHOW_RULER=false
  typeset -g POWERLEVEL9K_RULER_CHAR='─'        # reasonable alternative: '·'
  typeset -g POWERLEVEL9K_RULER_FOREGROUND=240

  # Filler between left and right prompt on the first prompt line. You can set it to '·' or '─'
  # to make it easier to see the alignment between left and right prompt and to separate prompt
  # from command output. It serves the same purpose as ruler (see above) without increasing
  # the number of prompt lines. You'll probably want to set POWERLEVEL9K_SHOW_RULER=false
  # if using this. You might also like POWERLEVEL9K_PROMPT_ADD_NEWLINE=false for more compact
  # prompt.
  typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_CHAR='·'
  if [[ $POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_CHAR != ' ' ]]; then
    # The color of the filler.
    typeset -g POWERLEVEL9K_MULTILINE_FIRST_PROMPT_GAP_FOREGROUND=240
    # Add a space between the end of left prompt and the filler.
    typeset -g POWERLEVEL9K_LEFT_PROMPT_LAST_SEGMENT_END_SYMBOL=' '
    # Add a space between the filler and the start of right prompt.
    typeset -g POWERLEVEL9K_RIGHT_PROMPT_FIRST_SEGMENT_START_SYMBOL=' '
    # Start filler from the edge of the screen if there are no left segments on the first line.
    typeset -g POWERLEVEL9K_EMPTY_LINE_LEFT_PROMPT_FIRST_SEGMENT_END_SYMBOL='%{%}'
    # End filler on the edge of the screen if there are no right segments on the first line.
    typeset -g POWERLEVEL9K_EMPTY_LINE_RIGHT_PROMPT_FIRST_SEGMENT_START_SYMBOL='%{%}'
  fi

  #################################[ os_icon: os identifier ]##################################
  # OS identifier color.
  typeset -g POWERLEVEL9K_OS_ICON_FOREGROUND=
  # Custom icon.
  # typeset -g POWERLEVEL9K_OS_ICON_CONTENT_EXPANSION='⭐'

  ################################[ prompt_char: prompt symbol ]################################
  # Green prompt symbol if the last command succeeded.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_OK_{VIINS,VICMD,VIVIS,VIOWR}_FOREGROUND=76
  # Red prompt symbol if the last command failed.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_ERROR_{VIINS,VICMD,VIVIS,VIOWR}_FOREGROUND=196
  # Default prompt symbol.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_{OK,ERROR}_VIINS_CONTENT_EXPANSION='❯'
  # Prompt symbol in command vi mode.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_{OK,ERROR}_VICMD_CONTENT_EXPANSION='❮'
  # Prompt symbol in visual vi mode.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_{OK,ERROR}_VIVIS_CONTENT_EXPANSION='V'
  # Prompt symbol in overwrite vi mode.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_{OK,ERROR}_VIOWR_CONTENT_EXPANSION='▶'
  typeset -g POWERLEVEL9K_PROMPT_CHAR_OVERWRITE_STATE=true
  # No line terminator if prompt_char is the last segment.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_LEFT_PROMPT_LAST_SEGMENT_END_SYMBOL=''
  # No line introducer if prompt_char is the first segment.
  typeset -g POWERLEVEL9K_PROMPT_CHAR_LEFT_PROMPT_FIRST_SEGMENT_START_SYMBOL=

  ##################################[ dir: current directory ]##################################
  # Default current directory color.
  typeset -g POWERLEVEL9K_DIR_FOREGROUND=31
  # If directory is too long, shorten some of its segments to the shortest possible unique
  # prefix. The shortened directory can be tab-completed to the original.
  typeset -g POWERLEVEL9K_SHORTEN_STRATEGY=truncate_to_unique
  # Replace removed segment suffixes with this symbol.
  typeset -g POWERLEVEL9K_SHORTEN_DELIMITER=
  # Color of the shortened directory segments.
  typeset -g POWERLEVEL9K_DIR_SHORTENED_FOREGROUND=103
  # Color of the anchor directory segments. Anchor segments are never shortened. The first
  # segment is always an anchor.
  typeset -g POWERLEVEL9K_DIR_ANCHOR_FOREGROUND=39
  # Display anchor directory segments in bold.
  typeset -g POWERLEVEL9K_DIR_ANCHOR_BOLD=true
  # Don't shorten directories that contain any of these files. They are anchors.
  local anchor_files=(
    .bzr
    .citc
    .git
    .hg
    .node-version
    .python-version
    .go-version
    .ruby-version
    .lua-version
    .java-version
    .perl-version
    .php-version
    .tool-versions
    .mise.toml
    .shorten_folder_marker
    .svn
    .terraform
    CVS
    Cargo.toml
    composer.json
    go.mod
    package.json
    stack.yaml
  )
  typeset -g POWERLEVEL9K_SHORTEN_FOLDER_MARKER="(${(j:|:)anchor_files})"
  # If set to "first" ("last"), remove everything before the first (last) subdirectory that contains
  # files matching $POWERLEVEL9K_SHORTEN_FOLDER_MARKER. For example, when the current directory is
  # /foo/bar/git_repo/nested_git_repo/baz, prompt will display git_repo/nested_git_repo/baz (first)
  # or nested_git_repo/baz (last). This assumes that git_repo and nested_git_repo contain markers
  # and other directories don't.
  #
  # Optionally, "first" and "last" can be followed by ":<offset>" where <offset> is an integer.
  # This moves the truncation point to the right (positive offset) or to the left (negative offset)
  # relative to the marker. Plain "first" and "last" are equivalent to "first:0" and "last:0"
  # respectively.
  typeset -g POWERLEVEL9K_DIR_TRUNCATE_BEFORE_MARKER=false
  # Don't shorten this many last directory segments. They are anchors.
  typeset -g POWERLEVEL9K_SHORTEN_DIR_LENGTH=1
  # Shorten directory if it's longer than this even if there is space for it. The value can
  # be either absolute (e.g., '80') or a percentage of terminal width (e.g, '50%'). If empty,
  # directory will be shortened only when prompt doesn't fit or when other parameters demand it
  # (see POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS and POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS_PCT below).
  # If set to `0`, directory will always be shortened to its minimum length.
  typeset -g POWERLEVEL9K_DIR_MAX_LENGTH=80
  # When `dir` segment is on the last prompt line, try to shorten it enough to leave at least this
  # many columns for typing commands.
  typeset -g POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS=40
  # When `dir` segment is on the last prompt line, try to shorten it enough to leave at least
  # COLUMNS * POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS_PCT * 0.01 columns for typing commands.
  typeset -g POWERLEVEL9K_DIR_MIN_COMMAND_COLUMNS_PCT=50
  # If set to true, embed a hyperlink into the directory. Useful for quickly
  # opening a directory in the file manager simply by clicking the link.
  # Can also be handy when the directory is shortened, as it allows you to see
  # the full directory that was used in previous commands.
  typeset -g POWERLEVEL9K_DIR_HYPERLINK=false

  # Enable special styling for non-writable and non-existent directories. See POWERLEVEL9K_LOCK_ICON
  # and POWERLEVEL9K_DIR_CLASSES below.
  typeset -g POWERLEVEL9K_DIR_SHOW_WRITABLE=v3

  # The default icon shown next to non-writable and non-existent directories when
  # POWERLEVEL9K_DIR_SHOW_WRITABLE is set to v3.
  typeset -g POWERLEVEL9K_LOCK_ICON='∅'

  # POWERLEVEL9K_DIR_CLASSES allows you to specify custom icons and colors for different
  # directories. It must be an array with 3 * N elements. Each triplet consists of:
  #
  #   1. A pattern against which the current directory ($PWD) is matched. Matching is done with
  #      extended_glob option enabled.
  #   2. Directory class for the purpose of styling.
  #   3. An empty string.
  #
  # Triplets are tried in order. The first triplet whose pattern matches $PWD wins.
  #
  # If POWERLEVEL9K_DIR_SHOW_WRITABLE is set to v3, non-writable and non-existent directories
  # acquire class suffix _NOT_WRITABLE and NON_EXISTENT respectively.
  #
  # For example, given these settings:
  #
  #   typeset -g POWERLEVEL9K_DIR_CLASSES=(
  #     '~/work(|/*)'  WORK     ''
  #     '~(|/*)'       HOME     ''
  #     '*'            DEFAULT  '')
  #
  # Whenever the current directory is ~/work or a subdirectory of ~/work, it gets styled with one
  # of the following classes depending on its writability and existence: WORK, WORK_NOT_WRITABLE or
  # WORK_NON_EXISTENT.
  #
  # Simply assigning classes to directories doesn't have any visible effects. It merely gives you an
  # option to define custom colors and icons for different directory classes.
  #
  #   # Styling for WORK.
  #   typeset -g POWERLEVEL9K_DIR_WORK_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_DIR_WORK_FOREGROUND=31
  #   typeset -g POWERLEVEL9K_DIR_WORK_SHORTENED_FOREGROUND=103
  #   typeset -g POWERLEVEL9K_DIR_WORK_ANCHOR_FOREGROUND=39
  #
  #   # Styling for WORK_NOT_WRITABLE.
  #   typeset -g POWERLEVEL9K_DIR_WORK_NOT_WRITABLE_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_DIR_WORK_NOT_WRITABLE_FOREGROUND=31
  #   typeset -g POWERLEVEL9K_DIR_WORK_NOT_WRITABLE_SHORTENED_FOREGROUND=103
  #   typeset -g POWERLEVEL9K_DIR_WORK_NOT_WRITABLE_ANCHOR_FOREGROUND=39
  #
  #   # Styling for WORK_NON_EXISTENT.
  #   typeset -g POWERLEVEL9K_DIR_WORK_NON_EXISTENT_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_DIR_WORK_NON_EXISTENT_FOREGROUND=31
  #   typeset -g POWERLEVEL9K_DIR_WORK_NON_EXISTENT_SHORTENED_FOREGROUND=103
  #   typeset -g POWERLEVEL9K_DIR_WORK_NON_EXISTENT_ANCHOR_FOREGROUND=39
  #
  # If a styling parameter isn't explicitly defined for some class, it falls back to the classless
  # parameter. For example, if POWERLEVEL9K_DIR_WORK_NOT_WRITABLE_FOREGROUND is not set, it falls
  # back to POWERLEVEL9K_DIR_FOREGROUND.
  #
  typeset -g POWERLEVEL9K_DIR_CLASSES=()

  # Custom prefix.
  # typeset -g POWERLEVEL9K_DIR_PREFIX='%fin '

  #####################################[ vcs: git status ]######################################
  # Branch icon. Set this parameter to '\UE0A0 ' for the popular Powerline branch icon.
  typeset -g POWERLEVEL9K_VCS_BRANCH_ICON=

  # Untracked files icon. It's really a question mark, your font isn't broken.
  # Change the value of this parameter to show a different icon.
  typeset -g POWERLEVEL9K_VCS_UNTRACKED_ICON='?'

  # Formatter for Git status.
  #
  # Example output: master wip ⇣42⇡42 *42 merge ~42 +42 !42 ?42.
  #
  # You can edit the function to customize how Git status looks.
  #
  # VCS_STATUS_* parameters are set by gitstatus plugin. See reference:
  # https://github.com/romkatv/gitstatus/blob/master/gitstatus.plugin.zsh.
  function my_git_formatter() {
    emulate -L zsh

    if [[ -n $P9K_CONTENT ]]; then
      # If P9K_CONTENT is not empty, use it. It's either "loading" or from vcs_info (not from
      # gitstatus plugin). VCS_STATUS_* parameters are not available in this case.
      typeset -g my_git_format=$P9K_CONTENT
      return
    fi

    if (( $1 )); then
      # Styling for up-to-date Git status.
      local       meta='%f'     # default foreground
      local      clean='%76F'   # green foreground
      local   modified='%178F'  # yellow foreground
      local  untracked='%39F'   # blue foreground
      local conflicted='%196F'  # red foreground
    else
      # Styling for incomplete and stale Git status.
      local       meta='%244F'  # grey foreground
      local      clean='%244F'  # grey foreground
      local   modified='%244F'  # grey foreground
      local  untracked='%244F'  # grey foreground
      local conflicted='%244F'  # grey foreground
    fi

    local res

    if [[ -n $VCS_STATUS_LOCAL_BRANCH ]]; then
      local branch=${(V)VCS_STATUS_LOCAL_BRANCH}
      # If local branch name is at most 32 characters long, show it in full.
      # Otherwise show the first 12 … the last 12.
      # Tip: To always show local branch name in full without truncation, delete the next line.
      (( $#branch > 32 )) && branch[13,-13]="…"  # <-- this line
      res+="${clean}${(g::)POWERLEVEL9K_VCS_BRANCH_ICON}${branch//\%/%%}"
    fi

    if [[ -n $VCS_STATUS_TAG
          # Show tag only if not on a branch.
          # Tip: To always show tag, delete the next line.
          && -z $VCS_STATUS_LOCAL_BRANCH  # <-- this line
        ]]; then
      local tag=${(V)VCS_STATUS_TAG}
      # If tag name is at most 32 characters long, show it in full.
      # Otherwise show the first 12 … the last 12.
      # Tip: To always show tag name in full without truncation, delete the next line.
      (( $#tag > 32 )) && tag[13,-13]="…"  # <-- this line
      res+="${meta}#${clean}${tag//\%/%%}"
    fi

    # Display the current Git commit if there is no branch and no tag.
    # Tip: To always display the current Git commit, delete the next line.
    [[ -z $VCS_STATUS_LOCAL_BRANCH && -z $VCS_STATUS_TAG ]] &&  # <-- this line
      res+="${meta}@${clean}${VCS_STATUS_COMMIT[1,8]}"

    # Show tracking branch name if it differs from local branch.
    if [[ -n ${VCS_STATUS_REMOTE_BRANCH:#$VCS_STATUS_LOCAL_BRANCH} ]]; then
      res+="${meta}:${clean}${(V)VCS_STATUS_REMOTE_BRANCH//\%/%%}"
    fi

    # Display "wip" if the latest commit's summary contains "wip" or "WIP".
    if [[ $VCS_STATUS_COMMIT_SUMMARY == (|*[^[:alnum:]])(wip|WIP)(|[^[:alnum:]]*) ]]; then
      res+=" ${modified}wip"
    fi

    if (( VCS_STATUS_COMMITS_AHEAD || VCS_STATUS_COMMITS_BEHIND )); then
      # ⇣42 if behind the remote.
      (( VCS_STATUS_COMMITS_BEHIND )) && res+=" ${clean}⇣${VCS_STATUS_COMMITS_BEHIND}"
      # ⇡42 if ahead of the remote; no leading space if also behind the remote: ⇣42⇡42.
      (( VCS_STATUS_COMMITS_AHEAD && !VCS_STATUS_COMMITS_BEHIND )) && res+=" "
      (( VCS_STATUS_COMMITS_AHEAD  )) && res+="${clean}⇡${VCS_STATUS_COMMITS_AHEAD}"
    elif [[ -n $VCS_STATUS_REMOTE_BRANCH ]]; then
      # Tip: Uncomment the next line to display '=' if up to date with the remote.
      # res+=" ${clean}="
    fi

    # ⇠42 if behind the push remote.
    (( VCS_STATUS_PUSH_COMMITS_BEHIND )) && res+=" ${clean}⇠${VCS_STATUS_PUSH_COMMITS_BEHIND}"
    (( VCS_STATUS_PUSH_COMMITS_AHEAD && !VCS_STATUS_PUSH_COMMITS_BEHIND )) && res+=" "
    # ⇢42 if ahead of the push remote; no leading space if also behind: ⇠42⇢42.
    (( VCS_STATUS_PUSH_COMMITS_AHEAD  )) && res+="${clean}⇢${VCS_STATUS_PUSH_COMMITS_AHEAD}"
    # *42 if have stashes.
    (( VCS_STATUS_STASHES        )) && res+=" ${clean}*${VCS_STATUS_STASHES}"
    # 'merge' if the repo is in an unusual state.
    [[ -n $VCS_STATUS_ACTION     ]] && res+=" ${conflicted}${VCS_STATUS_ACTION}"
    # ~42 if have merge conflicts.
    (( VCS_STATUS_NUM_CONFLICTED )) && res+=" ${conflicted}~${VCS_STATUS_NUM_CONFLICTED}"
    # +42 if have staged changes.
    (( VCS_STATUS_NUM_STAGED     )) && res+=" ${modified}+${VCS_STATUS_NUM_STAGED}"
    # !42 if have unstaged changes.
    (( VCS_STATUS_NUM_UNSTAGED   )) && res+=" ${modified}!${VCS_STATUS_NUM_UNSTAGED}"
    # ?42 if have untracked files. It's really a question mark, your font isn't broken.
    # See POWERLEVEL9K_VCS_UNTRACKED_ICON above if you want to use a different icon.
    # Remove the next line if you don't want to see untracked files at all.
    (( VCS_STATUS_NUM_UNTRACKED  )) && res+=" ${untracked}${(g::)POWERLEVEL9K_VCS_UNTRACKED_ICON}${VCS_STATUS_NUM_UNTRACKED}"
    # "─" if the number of unstaged files is unknown. This can happen due to
    # POWERLEVEL9K_VCS_MAX_INDEX_SIZE_DIRTY (see below) being set to a non-negative number lower
    # than the number of files in the Git index, or due to bash.showDirtyState being set to false
    # in the repository config. The number of staged and untracked files may also be unknown
    # in this case.
    (( VCS_STATUS_HAS_UNSTAGED == -1 )) && res+=" ${modified}─"

    typeset -g my_git_format=$res
  }
  functions -M my_git_formatter 2>/dev/null

  # Don't count the number of unstaged, untracked and conflicted files in Git repositories with
  # more than this many files in the index. Negative value means infinity.
  #
  # If you are working in Git repositories with tens of millions of files and seeing performance
  # sagging, try setting POWERLEVEL9K_VCS_MAX_INDEX_SIZE_DIRTY to a number lower than the output
  # of `git ls-files | wc -l`. Alternatively, add `bash.showDirtyState = false` to the repository's
  # config: `git config bash.showDirtyState false`.
  typeset -g POWERLEVEL9K_VCS_MAX_INDEX_SIZE_DIRTY=-1

  # Don't show Git status in prompt for repositories whose workdir matches this pattern.
  # For example, if set to '~', the Git repository at $HOME/.git will be ignored.
  # Multiple patterns can be combined with '|': '~(|/foo)|/bar/baz/*'.
  typeset -g POWERLEVEL9K_VCS_DISABLED_WORKDIR_PATTERN='~'

  # Disable the default Git status formatting.
  typeset -g POWERLEVEL9K_VCS_DISABLE_GITSTATUS_FORMATTING=true
  # Install our own Git status formatter.
  typeset -g POWERLEVEL9K_VCS_CONTENT_EXPANSION='${$((my_git_formatter(1)))+${my_git_format}}'
  typeset -g POWERLEVEL9K_VCS_LOADING_CONTENT_EXPANSION='${$((my_git_formatter(0)))+${my_git_format}}'
  # Enable counters for staged, unstaged, etc.
  typeset -g POWERLEVEL9K_VCS_{STAGED,UNSTAGED,UNTRACKED,CONFLICTED,COMMITS_AHEAD,COMMITS_BEHIND}_MAX_NUM=-1

  # Icon color.
  typeset -g POWERLEVEL9K_VCS_VISUAL_IDENTIFIER_COLOR=76
  typeset -g POWERLEVEL9K_VCS_LOADING_VISUAL_IDENTIFIER_COLOR=244
  # Custom icon.
  typeset -g POWERLEVEL9K_VCS_VISUAL_IDENTIFIER_EXPANSION=
  # Custom prefix.
  # typeset -g POWERLEVEL9K_VCS_PREFIX='%fon '

  # Show status of repositories of these types. You can add svn and/or hg if you are
  # using them. If you do, your prompt may become slow even when your current directory
  # isn't in an svn or hg repository.
  typeset -g POWERLEVEL9K_VCS_BACKENDS=(git)

  # These settings are used for repositories other than Git or when gitstatusd fails and
  # Powerlevel10k has to fall back to using vcs_info.
  typeset -g POWERLEVEL9K_VCS_CLEAN_FOREGROUND=76
  typeset -g POWERLEVEL9K_VCS_UNTRACKED_FOREGROUND=76
  typeset -g POWERLEVEL9K_VCS_MODIFIED_FOREGROUND=178

  ##########################[ status: exit code of the last command ]###########################
  # Enable OK_PIPE, ERROR_PIPE and ERROR_SIGNAL status states to allow us to enable, disable and
  # style them independently from the regular OK and ERROR state.
  typeset -g POWERLEVEL9K_STATUS_EXTENDED_STATES=true

  # Status on success. No content, just an icon. No need to show it if prompt_char is enabled as
  # it will signify success by turning green.
  typeset -g POWERLEVEL9K_STATUS_OK=false
  typeset -g POWERLEVEL9K_STATUS_OK_FOREGROUND=70
  typeset -g POWERLEVEL9K_STATUS_OK_VISUAL_IDENTIFIER_EXPANSION='✔'

  # Status when some part of a pipe command fails but the overall exit status is zero. It may look
  # like this: 1|0.
  typeset -g POWERLEVEL9K_STATUS_OK_PIPE=true
  typeset -g POWERLEVEL9K_STATUS_OK_PIPE_FOREGROUND=70
  typeset -g POWERLEVEL9K_STATUS_OK_PIPE_VISUAL_IDENTIFIER_EXPANSION='✔'

  # Status when it's just an error code (e.g., '1'). No need to show it if prompt_char is enabled as
  # it will signify error by turning red.
  typeset -g POWERLEVEL9K_STATUS_ERROR=false
  typeset -g POWERLEVEL9K_STATUS_ERROR_FOREGROUND=160
  typeset -g POWERLEVEL9K_STATUS_ERROR_VISUAL_IDENTIFIER_EXPANSION='х'

  # Status when the last command was terminated by a signal.
  typeset -g POWERLEVEL9K_STATUS_ERROR_SIGNAL=true
  typeset -g POWERLEVEL9K_STATUS_ERROR_SIGNAL_FOREGROUND=160
  # Use terse signal names: "INT" instead of "SIGINT(2)".
  typeset -g POWERLEVEL9K_STATUS_VERBOSE_SIGNAME=false
  typeset -g POWERLEVEL9K_STATUS_ERROR_SIGNAL_VISUAL_IDENTIFIER_EXPANSION='х'

  # Status when some part of a pipe command fails and the overall exit status is also non-zero.
  # It may look like this: 1|0.
  typeset -g POWERLEVEL9K_STATUS_ERROR_PIPE=true
  typeset -g POWERLEVEL9K_STATUS_ERROR_PIPE_FOREGROUND=160
  typeset -g POWERLEVEL9K_STATUS_ERROR_PIPE_VISUAL_IDENTIFIER_EXPANSION='х'

  ###################[ command_execution_time: duration of the last command ]###################
  # Show duration of the last command if takes at least this many seconds.
  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_THRESHOLD=3
  # Show this many fractional digits. Zero means round to seconds.
  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_PRECISION=0
  # Execution time color.
  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_FOREGROUND=101
  # Duration format: 1d 2h 3m 4s.
  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_FORMAT='d h m s'
  # Custom icon.
  typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_VISUAL_IDENTIFIER_EXPANSION=
  # Custom prefix.
  # typeset -g POWERLEVEL9K_COMMAND_EXECUTION_TIME_PREFIX='%ftook '

  #######################[ background_jobs: presence of background jobs ]#######################
  # Don't show the number of background jobs.
  typeset -g POWERLEVEL9K_BACKGROUND_JOBS_VERBOSE=false
  # Background jobs color.
  typeset -g POWERLEVEL9K_BACKGROUND_JOBS_FOREGROUND=70
  # Custom icon.
  typeset -g POWERLEVEL9K_BACKGROUND_JOBS_VISUAL_IDENTIFIER_EXPANSION='≡'

  #######################[ direnv: direnv status (https://direnv.net/) ]########################
  # Direnv color.
  typeset -g POWERLEVEL9K_DIRENV_FOREGROUND=178
  # Custom icon.
  # typeset -g POWERLEVEL9K_DIRENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###############[ asdf: asdf version manager (https://github.com/asdf-vm/asdf) ]###############
  # Default asdf color. Only used to display tools for which there is no color override (see below).
  # Tip:  Override this parameter for ${TOOL} with POWERLEVEL9K_ASDF_${TOOL}_FOREGROUND.
  typeset -g POWERLEVEL9K_ASDF_FOREGROUND=66

  # There are four parameters that can be used to hide asdf tools. Each parameter describes
  # conditions under which a tool gets hidden. Parameters can hide tools but not unhide them. If at
  # least one parameter decides to hide a tool, that tool gets hidden. If no parameter decides to
  # hide a tool, it gets shown.
  #
  # Special note on the difference between POWERLEVEL9K_ASDF_SOURCES and
  # POWERLEVEL9K_ASDF_PROMPT_ALWAYS_SHOW. Consider the effect of the following commands:
  #
  #   asdf local  python 3.8.1
  #   asdf global python 3.8.1
  #
  # After running both commands the current python version is 3.8.1 and its source is "local" as
  # it takes precedence over "global". If POWERLEVEL9K_ASDF_PROMPT_ALWAYS_SHOW is set to false,
  # it'll hide python version in this case because 3.8.1 is the same as the global version.
  # POWERLEVEL9K_ASDF_SOURCES will hide python version only if the value of this parameter doesn't
  # contain "local".

  # Hide tool versions that don't come from one of these sources.
  #
  # Available sources:
  #
  # - shell   `asdf current` says "set by ASDF_${TOOL}_VERSION environment variable"
  # - local   `asdf current` says "set by /some/not/home/directory/file"
  # - global  `asdf current` says "set by /home/username/file"
  #
  # Note: If this parameter is set to (shell local global), it won't hide tools.
  # Tip:  Override this parameter for ${TOOL} with POWERLEVEL9K_ASDF_${TOOL}_SOURCES.
  typeset -g POWERLEVEL9K_ASDF_SOURCES=(shell local global)

  # If set to false, hide tool versions that are the same as global.
  #
  # Note: The name of this parameter doesn't reflect its meaning at all.
  # Note: If this parameter is set to true, it won't hide tools.
  # Tip:  Override this parameter for ${TOOL} with POWERLEVEL9K_ASDF_${TOOL}_PROMPT_ALWAYS_SHOW.
  typeset -g POWERLEVEL9K_ASDF_PROMPT_ALWAYS_SHOW=false

  # If set to false, hide tool versions that are equal to "system".
  #
  # Note: If this parameter is set to true, it won't hide tools.
  # Tip: Override this parameter for ${TOOL} with POWERLEVEL9K_ASDF_${TOOL}_SHOW_SYSTEM.
  typeset -g POWERLEVEL9K_ASDF_SHOW_SYSTEM=true

  # If set to non-empty value, hide tools unless there is a file matching the specified file pattern
  # in the current directory, or its parent directory, or its grandparent directory, and so on.
  #
  # Note: If this parameter is set to empty value, it won't hide tools.
  # Note: SHOW_ON_UPGLOB isn't specific to asdf. It works with all prompt segments.
  # Tip: Override this parameter for ${TOOL} with POWERLEVEL9K_ASDF_${TOOL}_SHOW_ON_UPGLOB.
  #
  # Example: Hide nodejs version when there is no package.json and no *.js files in the current
  # directory, in `..`, in `../..` and so on.
  #
  #   typeset -g POWERLEVEL9K_ASDF_NODEJS_SHOW_ON_UPGLOB='*.js|package.json'
  typeset -g POWERLEVEL9K_ASDF_SHOW_ON_UPGLOB=

  # Ruby version from asdf.
  typeset -g POWERLEVEL9K_ASDF_RUBY_FOREGROUND=168
  # typeset -g POWERLEVEL9K_ASDF_RUBY_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_RUBY_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Python version from asdf.
  typeset -g POWERLEVEL9K_ASDF_PYTHON_FOREGROUND=37
  # typeset -g POWERLEVEL9K_ASDF_PYTHON_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_PYTHON_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Go version from asdf.
  typeset -g POWERLEVEL9K_ASDF_GOLANG_FOREGROUND=37
  # typeset -g POWERLEVEL9K_ASDF_GOLANG_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_GOLANG_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Node.js version from asdf.
  typeset -g POWERLEVEL9K_ASDF_NODEJS_FOREGROUND=70
  # typeset -g POWERLEVEL9K_ASDF_NODEJS_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_NODEJS_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Rust version from asdf.
  typeset -g POWERLEVEL9K_ASDF_RUST_FOREGROUND=37
  # typeset -g POWERLEVEL9K_ASDF_RUST_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_RUST_SHOW_ON_UPGLOB='*.foo|*.bar'

  # .NET Core version from asdf.
  typeset -g POWERLEVEL9K_ASDF_DOTNET_CORE_FOREGROUND=134
  # typeset -g POWERLEVEL9K_ASDF_DOTNET_CORE_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_DOTNET_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Flutter version from asdf.
  typeset -g POWERLEVEL9K_ASDF_FLUTTER_FOREGROUND=38
  # typeset -g POWERLEVEL9K_ASDF_FLUTTER_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_FLUTTER_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Lua version from asdf.
  typeset -g POWERLEVEL9K_ASDF_LUA_FOREGROUND=32
  # typeset -g POWERLEVEL9K_ASDF_LUA_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_LUA_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Java version from asdf.
  typeset -g POWERLEVEL9K_ASDF_JAVA_FOREGROUND=32
  # typeset -g POWERLEVEL9K_ASDF_JAVA_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_JAVA_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Perl version from asdf.
  typeset -g POWERLEVEL9K_ASDF_PERL_FOREGROUND=67
  # typeset -g POWERLEVEL9K_ASDF_PERL_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_PERL_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Erlang version from asdf.
  typeset -g POWERLEVEL9K_ASDF_ERLANG_FOREGROUND=125
  # typeset -g POWERLEVEL9K_ASDF_ERLANG_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_ERLANG_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Elixir version from asdf.
  typeset -g POWERLEVEL9K_ASDF_ELIXIR_FOREGROUND=129
  # typeset -g POWERLEVEL9K_ASDF_ELIXIR_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_ELIXIR_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Postgres version from asdf.
  typeset -g POWERLEVEL9K_ASDF_POSTGRES_FOREGROUND=31
  # typeset -g POWERLEVEL9K_ASDF_POSTGRES_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_POSTGRES_SHOW_ON_UPGLOB='*.foo|*.bar'

  # PHP version from asdf.
  typeset -g POWERLEVEL9K_ASDF_PHP_FOREGROUND=99
  # typeset -g POWERLEVEL9K_ASDF_PHP_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_PHP_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Haskell version from asdf.
  typeset -g POWERLEVEL9K_ASDF_HASKELL_FOREGROUND=172
  # typeset -g POWERLEVEL9K_ASDF_HASKELL_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_HASKELL_SHOW_ON_UPGLOB='*.foo|*.bar'

  # Julia version from asdf.
  typeset -g POWERLEVEL9K_ASDF_JULIA_FOREGROUND=70
  # typeset -g POWERLEVEL9K_ASDF_JULIA_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_ASDF_JULIA_SHOW_ON_UPGLOB='*.foo|*.bar'

  ##########[ nordvpn: nordvpn connection status, linux only (https://nordvpn.com/) ]###########
  # NordVPN connection indicator color.
  typeset -g POWERLEVEL9K_NORDVPN_FOREGROUND=39
  # Hide NordVPN connection indicator when not connected.
  typeset -g POWERLEVEL9K_NORDVPN_{DISCONNECTED,CONNECTING,DISCONNECTING}_CONTENT_EXPANSION=
  typeset -g POWERLEVEL9K_NORDVPN_{DISCONNECTED,CONNECTING,DISCONNECTING}_VISUAL_IDENTIFIER_EXPANSION=
  # Custom icon.
  typeset -g POWERLEVEL9K_NORDVPN_VISUAL_IDENTIFIER_EXPANSION='nord'

  #################[ ranger: ranger shell (https://github.com/ranger/ranger) ]##################
  # Ranger shell color.
  typeset -g POWERLEVEL9K_RANGER_FOREGROUND=178
  # Custom icon.
  typeset -g POWERLEVEL9K_RANGER_VISUAL_IDENTIFIER_EXPANSION='▲'
  
  ####################[ yazi: yazi shell (https://github.com/sxyazi/yazi) ]#####################
  # Yazi shell color.
  typeset -g POWERLEVEL9K_YAZI_FOREGROUND=178
  # Custom icon.
  typeset -g POWERLEVEL9K_YAZI_VISUAL_IDENTIFIER_EXPANSION='▲'

  ######################[ nnn: nnn shell (https://github.com/jarun/nnn) ]#######################
  # Nnn shell color.
  typeset -g POWERLEVEL9K_NNN_FOREGROUND=72
  # Custom icon.
  # typeset -g POWERLEVEL9K_NNN_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ######################[ lf: lf shell (https://github.com/gokcehan/lf) ]#######################
  # lf shell color.
  typeset -g POWERLEVEL9K_LF_FOREGROUND=72
  # Custom icon.
  # typeset -g POWERLEVEL9K_LF_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##################[ xplr: xplr shell (https://github.com/sayanarijit/xplr) ]##################
  # xplr shell color.
  typeset -g POWERLEVEL9K_XPLR_FOREGROUND=72
  # Custom icon.
  # typeset -g POWERLEVEL9K_XPLR_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###########################[ vim_shell: vim shell indicator (:sh) ]###########################
  # Vim shell indicator color.
  typeset -g POWERLEVEL9K_VIM_SHELL_FOREGROUND=34
  # Custom icon.
  # typeset -g POWERLEVEL9K_VIM_SHELL_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ######[ midnight_commander: midnight commander shell (https://midnight-commander.org/) ]######
  # Midnight Commander shell color.
  typeset -g POWERLEVEL9K_MIDNIGHT_COMMANDER_FOREGROUND=178
  # Custom icon.
  # typeset -g POWERLEVEL9K_MIDNIGHT_COMMANDER_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #[ nix_shell: nix shell (https://nixos.org/nixos/nix-pills/developing-with-nix-shell.html) ]##
  # Nix shell color.
  typeset -g POWERLEVEL9K_NIX_SHELL_FOREGROUND=74

  # Display the icon of nix_shell if PATH contains a subdirectory of /nix/store.
  # typeset -g POWERLEVEL9K_NIX_SHELL_INFER_FROM_PATH=false

  # Tip: If you want to see just the icon without "pure" and "impure", uncomment the next line.
  # typeset -g POWERLEVEL9K_NIX_SHELL_CONTENT_EXPANSION=

  # Custom icon.
  # typeset -g POWERLEVEL9K_NIX_SHELL_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##################[ chezmoi_shell: chezmoi shell (https://www.chezmoi.io/) ]##################
  # chezmoi shell color.
  typeset -g POWERLEVEL9K_CHEZMOI_SHELL_FOREGROUND=33
  # Custom icon.
  # typeset -g POWERLEVEL9K_CHEZMOI_SHELL_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##################################[ disk_usage: disk usage ]##################################
  # Colors for different levels of disk usage.
  typeset -g POWERLEVEL9K_DISK_USAGE_NORMAL_FOREGROUND=35
  typeset -g POWERLEVEL9K_DISK_USAGE_WARNING_FOREGROUND=220
  typeset -g POWERLEVEL9K_DISK_USAGE_CRITICAL_FOREGROUND=160
  # Thresholds for different levels of disk usage (percentage points).
  typeset -g POWERLEVEL9K_DISK_USAGE_WARNING_LEVEL=90
  typeset -g POWERLEVEL9K_DISK_USAGE_CRITICAL_LEVEL=95
  # If set to true, hide disk usage when below $POWERLEVEL9K_DISK_USAGE_WARNING_LEVEL percent.
  typeset -g POWERLEVEL9K_DISK_USAGE_ONLY_WARNING=false
  # Custom icon.
  # typeset -g POWERLEVEL9K_DISK_USAGE_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ######################################[ ram: free RAM ]#######################################
  # RAM color.
  typeset -g POWERLEVEL9K_RAM_FOREGROUND=66
  # Custom icon.
  # typeset -g POWERLEVEL9K_RAM_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #####################################[ swap: used swap ]######################################
  # Swap color.
  typeset -g POWERLEVEL9K_SWAP_FOREGROUND=96
  # Custom icon.
  # typeset -g POWERLEVEL9K_SWAP_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ######################################[ load: CPU load ]######################################
  # Show average CPU load over this many last minutes. Valid values are 1, 5 and 15.
  typeset -g POWERLEVEL9K_LOAD_WHICH=5
  # Load color when load is under 50%.
  typeset -g POWERLEVEL9K_LOAD_NORMAL_FOREGROUND=66
  # Load color when load is between 50% and 70%.
  typeset -g POWERLEVEL9K_LOAD_WARNING_FOREGROUND=178
  # Load color when load is over 70%.
  typeset -g POWERLEVEL9K_LOAD_CRITICAL_FOREGROUND=166
  # Custom icon.
  # typeset -g POWERLEVEL9K_LOAD_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ################[ todo: todo items (https://github.com/todotxt/todo.txt-cli) ]################
  # Todo color.
  typeset -g POWERLEVEL9K_TODO_FOREGROUND=110
  # Hide todo when the total number of tasks is zero.
  typeset -g POWERLEVEL9K_TODO_HIDE_ZERO_TOTAL=true
  # Hide todo when the number of tasks after filtering is zero.
  typeset -g POWERLEVEL9K_TODO_HIDE_ZERO_FILTERED=false

  # Todo format. The following parameters are available within the expansion.
  #
  # - P9K_TODO_TOTAL_TASK_COUNT     The total number of tasks.
  # - P9K_TODO_FILTERED_TASK_COUNT  The number of tasks after filtering.
  #
  # These variables correspond to the last line of the output of `todo.sh -p ls`:
  #
  #   TODO: 24 of 42 tasks shown
  #
  # Here 24 is P9K_TODO_FILTERED_TASK_COUNT and 42 is P9K_TODO_TOTAL_TASK_COUNT.
  #
  # typeset -g POWERLEVEL9K_TODO_CONTENT_EXPANSION='$P9K_TODO_FILTERED_TASK_COUNT'

  # Custom icon.
  # typeset -g POWERLEVEL9K_TODO_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###########[ timewarrior: timewarrior tracking status (https://timewarrior.net/) ]############
  # Timewarrior color.
  typeset -g POWERLEVEL9K_TIMEWARRIOR_FOREGROUND=110
  # If the tracked task is longer than 24 characters, truncate and append "…".
  # Tip: To always display tasks without truncation, delete the following parameter.
  # Tip: To hide task names and display just the icon when time tracking is enabled, set the
  # value of the following parameter to "".
  typeset -g POWERLEVEL9K_TIMEWARRIOR_CONTENT_EXPANSION='${P9K_CONTENT:0:24}${${P9K_CONTENT:24}:+…}'

  # Custom icon.
  # typeset -g POWERLEVEL9K_TIMEWARRIOR_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##############[ taskwarrior: taskwarrior task count (https://taskwarrior.org/) ]##############
  # Taskwarrior color.
  typeset -g POWERLEVEL9K_TASKWARRIOR_FOREGROUND=74

  # Taskwarrior segment format. The following parameters are available within the expansion.
  #
  # - P9K_TASKWARRIOR_PENDING_COUNT   The number of pending tasks: `task +PENDING count`.
  # - P9K_TASKWARRIOR_OVERDUE_COUNT   The number of overdue tasks: `task +OVERDUE count`.
  #
  # Zero values are represented as empty parameters.
  #
  # The default format:
  #
  #   '${P9K_TASKWARRIOR_OVERDUE_COUNT:+"!$P9K_TASKWARRIOR_OVERDUE_COUNT/"}$P9K_TASKWARRIOR_PENDING_COUNT'
  #
  # typeset -g POWERLEVEL9K_TASKWARRIOR_CONTENT_EXPANSION='$P9K_TASKWARRIOR_PENDING_COUNT'

  # Custom icon.
  # typeset -g POWERLEVEL9K_TASKWARRIOR_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ######[ per_directory_history: Oh My Zsh per-directory-history local/global indicator ]#######
  # Color when using local/global history.
  typeset -g POWERLEVEL9K_PER_DIRECTORY_HISTORY_LOCAL_FOREGROUND=135
  typeset -g POWERLEVEL9K_PER_DIRECTORY_HISTORY_GLOBAL_FOREGROUND=130

  # Tip: Uncomment the next two lines to hide "local"/"global" text and leave just the icon.
  # typeset -g POWERLEVEL9K_PER_DIRECTORY_HISTORY_LOCAL_CONTENT_EXPANSION=''
  # typeset -g POWERLEVEL9K_PER_DIRECTORY_HISTORY_GLOBAL_CONTENT_EXPANSION=''

  # Custom icon.
  # typeset -g POWERLEVEL9K_PER_DIRECTORY_HISTORY_LOCAL_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # typeset -g POWERLEVEL9K_PER_DIRECTORY_HISTORY_GLOBAL_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ################################[ cpu_arch: CPU architecture ]################################
  # CPU architecture color.
  typeset -g POWERLEVEL9K_CPU_ARCH_FOREGROUND=172

  # Hide the segment when on a specific CPU architecture.
  # typeset -g POWERLEVEL9K_CPU_ARCH_X86_64_CONTENT_EXPANSION=
  # typeset -g POWERLEVEL9K_CPU_ARCH_X86_64_VISUAL_IDENTIFIER_EXPANSION=

  # Custom icon.
  # typeset -g POWERLEVEL9K_CPU_ARCH_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##################################[ context: user@hostname ]##################################
  # Context color when running with privileges.
  typeset -g POWERLEVEL9K_CONTEXT_ROOT_FOREGROUND=178
  # Context color in SSH without privileges.
  typeset -g POWERLEVEL9K_CONTEXT_{REMOTE,REMOTE_SUDO}_FOREGROUND=180
  # Default context color (no privileges, no SSH).
  typeset -g POWERLEVEL9K_CONTEXT_FOREGROUND=180

  # Context format when running with privileges: bold user@hostname.
  typeset -g POWERLEVEL9K_CONTEXT_ROOT_TEMPLATE='%B%n@%m'
  # Context format when in SSH without privileges: user@hostname.
  typeset -g POWERLEVEL9K_CONTEXT_{REMOTE,REMOTE_SUDO}_TEMPLATE='%n@%m'
  # Default context format (no privileges, no SSH): user@hostname.
  typeset -g POWERLEVEL9K_CONTEXT_TEMPLATE='%n@%m'

  # Don't show context unless running with privileges or in SSH.
  # Tip: Remove the next line to always show context.
  typeset -g POWERLEVEL9K_CONTEXT_{DEFAULT,SUDO}_{CONTENT,VISUAL_IDENTIFIER}_EXPANSION=

  # Custom icon.
  # typeset -g POWERLEVEL9K_CONTEXT_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # Custom prefix.
  # typeset -g POWERLEVEL9K_CONTEXT_PREFIX='%fwith '

  ###[ virtualenv: python virtual environment (https://docs.python.org/3/library/venv.html) ]###
  # Python virtual environment color.
  typeset -g POWERLEVEL9K_VIRTUALENV_FOREGROUND=37
  # Don't show Python version next to the virtual environment name.
  typeset -g POWERLEVEL9K_VIRTUALENV_SHOW_PYTHON_VERSION=false
  # If set to "false", won't show virtualenv if pyenv is already shown.
  # If set to "if-different", won't show virtualenv if it's the same as pyenv.
  typeset -g POWERLEVEL9K_VIRTUALENV_SHOW_WITH_PYENV=false
  # Separate environment name from Python version only with a space.
  typeset -g POWERLEVEL9K_VIRTUALENV_{LEFT,RIGHT}_DELIMITER=
  # Custom icon.
  # typeset -g POWERLEVEL9K_VIRTUALENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #####################[ anaconda: conda environment (https://conda.io/) ]######################
  # Anaconda environment color.
  typeset -g POWERLEVEL9K_ANACONDA_FOREGROUND=37

  # Anaconda segment format. The following parameters are available within the expansion.
  #
  # - CONDA_PREFIX                 Absolute path to the active Anaconda/Miniconda environment.
  # - CONDA_DEFAULT_ENV            Name of the active Anaconda/Miniconda environment.
  # - CONDA_PROMPT_MODIFIER        Configurable prompt modifier (see below).
  # - P9K_ANACONDA_PYTHON_VERSION  Current python version (python --version).
  #
  # CONDA_PROMPT_MODIFIER can be configured with the following command:
  #
  #   conda config --set env_prompt '({default_env}) '
  #
  # The last argument is a Python format string that can use the following variables:
  #
  # - prefix       The same as CONDA_PREFIX.
  # - default_env  The same as CONDA_DEFAULT_ENV.
  # - name         The last segment of CONDA_PREFIX.
  # - stacked_env  Comma-separated list of names in the environment stack. The first element is
  #                always the same as default_env.
  #
  # Note: '({default_env}) ' is the default value of env_prompt.
  #
  # The default value of POWERLEVEL9K_ANACONDA_CONTENT_EXPANSION expands to $CONDA_PROMPT_MODIFIER
  # without the surrounding parentheses, or to the last path component of CONDA_PREFIX if the former
  # is empty.
  typeset -g POWERLEVEL9K_ANACONDA_CONTENT_EXPANSION='${${${${CONDA_PROMPT_MODIFIER#\(}% }%\)}:-${CONDA_PREFIX:t}}'

  # Custom icon.
  # typeset -g POWERLEVEL9K_ANACONDA_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ################[ pyenv: python environment (https://github.com/pyenv/pyenv) ]################
  # Pyenv color.
  typeset -g POWERLEVEL9K_PYENV_FOREGROUND=37
  # Hide python version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_PYENV_SOURCES=(shell local global)
  # If set to false, hide python version if it's the same as global:
  # $(pyenv version-name) == $(pyenv global).
  typeset -g POWERLEVEL9K_PYENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide python version if it's equal to "system".
  typeset -g POWERLEVEL9K_PYENV_SHOW_SYSTEM=true

  # Pyenv segment format. The following parameters are available within the expansion.
  #
  # - P9K_CONTENT                Current pyenv environment (pyenv version-name).
  # - P9K_PYENV_PYTHON_VERSION   Current python version (python --version).
  #
  # The default format has the following logic:
  #
  # 1. Display just "$P9K_CONTENT" if it's equal to "$P9K_PYENV_PYTHON_VERSION" or
  #    starts with "$P9K_PYENV_PYTHON_VERSION/".
  # 2. Otherwise display "$P9K_CONTENT $P9K_PYENV_PYTHON_VERSION".
  typeset -g POWERLEVEL9K_PYENV_CONTENT_EXPANSION='${P9K_CONTENT}${${P9K_CONTENT:#$P9K_PYENV_PYTHON_VERSION(|/*)}:+ $P9K_PYENV_PYTHON_VERSION}'

  # Custom icon.
  # typeset -g POWERLEVEL9K_PYENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ################[ goenv: go environment (https://github.com/syndbg/goenv) ]################
  # Goenv color.
  typeset -g POWERLEVEL9K_GOENV_FOREGROUND=37
  # Hide go version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_GOENV_SOURCES=(shell local global)
  # If set to false, hide go version if it's the same as global:
  # $(goenv version-name) == $(goenv global).
  typeset -g POWERLEVEL9K_GOENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide go version if it's equal to "system".
  typeset -g POWERLEVEL9K_GOENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_GOENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##########[ nodenv: node.js version from nodenv (https://github.com/nodenv/nodenv) ]##########
  # Nodenv color.
  typeset -g POWERLEVEL9K_NODENV_FOREGROUND=70
  # Hide node version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_NODENV_SOURCES=(shell local global)
  # If set to false, hide node version if it's the same as global:
  # $(nodenv version-name) == $(nodenv global).
  typeset -g POWERLEVEL9K_NODENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide node version if it's equal to "system".
  typeset -g POWERLEVEL9K_NODENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_NODENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##############[ nvm: node.js version from nvm (https://github.com/nvm-sh/nvm) ]###############
  # Nvm color.
  typeset -g POWERLEVEL9K_NVM_FOREGROUND=70
  # If set to false, hide node version if it's the same as default:
  # $(nvm version current) == $(nvm version default).
  typeset -g POWERLEVEL9K_NVM_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide node version if it's equal to "system".
  typeset -g POWERLEVEL9K_NVM_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_NVM_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ############[ nodeenv: node.js environment (https://github.com/ekalinin/nodeenv) ]############
  # Nodeenv color.
  typeset -g POWERLEVEL9K_NODEENV_FOREGROUND=70
  # Don't show Node version next to the environment name.
  typeset -g POWERLEVEL9K_NODEENV_SHOW_NODE_VERSION=false
  # Separate environment name from Node version only with a space.
  typeset -g POWERLEVEL9K_NODEENV_{LEFT,RIGHT}_DELIMITER=
  # Custom icon.
  # typeset -g POWERLEVEL9K_NODEENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##############################[ node_version: node.js version ]###############################
  # Node version color.
  typeset -g POWERLEVEL9K_NODE_VERSION_FOREGROUND=70
  # Show node version only when in a directory tree containing package.json.
  typeset -g POWERLEVEL9K_NODE_VERSION_PROJECT_ONLY=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_NODE_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #######################[ go_version: go version (https://golang.org) ]########################
  # Go version color.
  typeset -g POWERLEVEL9K_GO_VERSION_FOREGROUND=37
  # Show go version only when in a go project subdirectory.
  typeset -g POWERLEVEL9K_GO_VERSION_PROJECT_ONLY=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_GO_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #################[ rust_version: rustc version (https://www.rust-lang.org) ]##################
  # Rust version color.
  typeset -g POWERLEVEL9K_RUST_VERSION_FOREGROUND=37
  # Show rust version only when in a rust project subdirectory.
  typeset -g POWERLEVEL9K_RUST_VERSION_PROJECT_ONLY=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_RUST_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###############[ dotnet_version: .NET version (https://dotnet.microsoft.com) ]################
  # .NET version color.
  typeset -g POWERLEVEL9K_DOTNET_VERSION_FOREGROUND=134
  # Show .NET version only when in a .NET project subdirectory.
  typeset -g POWERLEVEL9K_DOTNET_VERSION_PROJECT_ONLY=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_DOTNET_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #####################[ php_version: php version (https://www.php.net/) ]######################
  # PHP version color.
  typeset -g POWERLEVEL9K_PHP_VERSION_FOREGROUND=99
  # Show PHP version only when in a PHP project subdirectory.
  typeset -g POWERLEVEL9K_PHP_VERSION_PROJECT_ONLY=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_PHP_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##########[ laravel_version: laravel php framework version (https://laravel.com/) ]###########
  # Laravel version color.
  typeset -g POWERLEVEL9K_LARAVEL_VERSION_FOREGROUND=161
  # Custom icon.
  # typeset -g POWERLEVEL9K_LARAVEL_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ####################[ java_version: java version (https://www.java.com/) ]####################
  # Java version color.
  typeset -g POWERLEVEL9K_JAVA_VERSION_FOREGROUND=32
  # Show java version only when in a java project subdirectory.
  typeset -g POWERLEVEL9K_JAVA_VERSION_PROJECT_ONLY=true
  # Show brief version.
  typeset -g POWERLEVEL9K_JAVA_VERSION_FULL=false
  # Custom icon.
  # typeset -g POWERLEVEL9K_JAVA_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###[ package: name@version from package.json (https://docs.npmjs.com/files/package.json) ]####
  # Package color.
  typeset -g POWERLEVEL9K_PACKAGE_FOREGROUND=117
  # Package format. The following parameters are available within the expansion.
  #
  # - P9K_PACKAGE_NAME     The value of `name` field in package.json.
  # - P9K_PACKAGE_VERSION  The value of `version` field in package.json.
  #
  # typeset -g POWERLEVEL9K_PACKAGE_CONTENT_EXPANSION='${P9K_PACKAGE_NAME//\%/%%}@${P9K_PACKAGE_VERSION//\%/%%}'
  # Custom icon.
  # typeset -g POWERLEVEL9K_PACKAGE_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #############[ rbenv: ruby version from rbenv (https://github.com/rbenv/rbenv) ]##############
  # Rbenv color.
  typeset -g POWERLEVEL9K_RBENV_FOREGROUND=168
  # Hide ruby version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_RBENV_SOURCES=(shell local global)
  # If set to false, hide ruby version if it's the same as global:
  # $(rbenv version-name) == $(rbenv global).
  typeset -g POWERLEVEL9K_RBENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide ruby version if it's equal to "system".
  typeset -g POWERLEVEL9K_RBENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_RBENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #######################[ rvm: ruby version from rvm (https://rvm.io) ]########################
  # Rvm color.
  typeset -g POWERLEVEL9K_RVM_FOREGROUND=168
  # Don't show @gemset at the end.
  typeset -g POWERLEVEL9K_RVM_SHOW_GEMSET=false
  # Don't show ruby- at the front.
  typeset -g POWERLEVEL9K_RVM_SHOW_PREFIX=false
  # Custom icon.
  # typeset -g POWERLEVEL9K_RVM_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###########[ fvm: flutter version management (https://github.com/leoafarias/fvm) ]############
  # Fvm color.
  typeset -g POWERLEVEL9K_FVM_FOREGROUND=38
  # Custom icon.
  # typeset -g POWERLEVEL9K_FVM_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##########[ luaenv: lua version from luaenv (https://github.com/cehoffman/luaenv) ]###########
  # Lua color.
  typeset -g POWERLEVEL9K_LUAENV_FOREGROUND=32
  # Hide lua version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_LUAENV_SOURCES=(shell local global)
  # If set to false, hide lua version if it's the same as global:
  # $(luaenv version-name) == $(luaenv global).
  typeset -g POWERLEVEL9K_LUAENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide lua version if it's equal to "system".
  typeset -g POWERLEVEL9K_LUAENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_LUAENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###############[ jenv: java version from jenv (https://github.com/jenv/jenv) ]################
  # Java color.
  typeset -g POWERLEVEL9K_JENV_FOREGROUND=32
  # Hide java version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_JENV_SOURCES=(shell local global)
  # If set to false, hide java version if it's the same as global:
  # $(jenv version-name) == $(jenv global).
  typeset -g POWERLEVEL9K_JENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide java version if it's equal to "system".
  typeset -g POWERLEVEL9K_JENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_JENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###########[ plenv: perl version from plenv (https://github.com/tokuhirom/plenv) ]############
  # Perl color.
  typeset -g POWERLEVEL9K_PLENV_FOREGROUND=67
  # Hide perl version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_PLENV_SOURCES=(shell local global)
  # If set to false, hide perl version if it's the same as global:
  # $(plenv version-name) == $(plenv global).
  typeset -g POWERLEVEL9K_PLENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide perl version if it's equal to "system".
  typeset -g POWERLEVEL9K_PLENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_PLENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###########[ perlbrew: perl version from perlbrew (https://github.com/gugod/App-perlbrew) ]############
  # Perlbrew color.
  typeset -g POWERLEVEL9K_PERLBREW_FOREGROUND=67
  # Show perlbrew version only when in a perl project subdirectory.
  typeset -g POWERLEVEL9K_PERLBREW_PROJECT_ONLY=true
  # Don't show "perl-" at the front.
  typeset -g POWERLEVEL9K_PERLBREW_SHOW_PREFIX=false
  # Custom icon.
  # typeset -g POWERLEVEL9K_PERLBREW_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ############[ phpenv: php version from phpenv (https://github.com/phpenv/phpenv) ]############
  # PHP color.
  typeset -g POWERLEVEL9K_PHPENV_FOREGROUND=99
  # Hide php version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_PHPENV_SOURCES=(shell local global)
  # If set to false, hide php version if it's the same as global:
  # $(phpenv version-name) == $(phpenv global).
  typeset -g POWERLEVEL9K_PHPENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide php version if it's equal to "system".
  typeset -g POWERLEVEL9K_PHPENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_PHPENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #######[ scalaenv: scala version from scalaenv (https://github.com/scalaenv/scalaenv) ]#######
  # Scala color.
  typeset -g POWERLEVEL9K_SCALAENV_FOREGROUND=160
  # Hide scala version if it doesn't come from one of these sources.
  typeset -g POWERLEVEL9K_SCALAENV_SOURCES=(shell local global)
  # If set to false, hide scala version if it's the same as global:
  # $(scalaenv version-name) == $(scalaenv global).
  typeset -g POWERLEVEL9K_SCALAENV_PROMPT_ALWAYS_SHOW=false
  # If set to false, hide scala version if it's equal to "system".
  typeset -g POWERLEVEL9K_SCALAENV_SHOW_SYSTEM=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_SCALAENV_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##########[ haskell_stack: haskell version from stack (https://haskellstack.org/) ]###########
  # Haskell color.
  typeset -g POWERLEVEL9K_HASKELL_STACK_FOREGROUND=172
  # Hide haskell version if it doesn't come from one of these sources.
  #
  #   shell:  version is set by STACK_YAML
  #   local:  version is set by stack.yaml up the directory tree
  #   global: version is set by the implicit global project (~/.stack/global-project/stack.yaml)
  typeset -g POWERLEVEL9K_HASKELL_STACK_SOURCES=(shell local)
  # If set to false, hide haskell version if it's the same as in the implicit global project.
  typeset -g POWERLEVEL9K_HASKELL_STACK_ALWAYS_SHOW=true
  # Custom icon.
  # typeset -g POWERLEVEL9K_HASKELL_STACK_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #############[ kubecontext: current kubernetes context (https://kubernetes.io/) ]#############
  # Show kubecontext only when the command you are typing invokes one of these tools.
  # Tip: Remove the next line to always show kubecontext.
  typeset -g POWERLEVEL9K_KUBECONTEXT_SHOW_ON_COMMAND='kubectl|helm|kubens|kubectx|oc|istioctl|kogito|k9s|helmfile|flux|fluxctl|stern|kubeseal|skaffold|kubent|kubecolor|cmctl|sparkctl'

  # Kubernetes context classes for the purpose of using different colors, icons and expansions with
  # different contexts.
  #
  # POWERLEVEL9K_KUBECONTEXT_CLASSES is an array with even number of elements. The first element
  # in each pair defines a pattern against which the current kubernetes context gets matched.
  # More specifically, it's P9K_CONTENT prior to the application of context expansion (see below)
  # that gets matched. If you unset all POWERLEVEL9K_KUBECONTEXT_*CONTENT_EXPANSION parameters,
  # you'll see this value in your prompt. The second element of each pair in
  # POWERLEVEL9K_KUBECONTEXT_CLASSES defines the context class. Patterns are tried in order. The
  # first match wins.
  #
  # For example, given these settings:
  #
  #   typeset -g POWERLEVEL9K_KUBECONTEXT_CLASSES=(
  #     '*prod*'  PROD
  #     '*test*'  TEST
  #     '*'       DEFAULT)
  #
  # If your current kubernetes context is "deathray-testing/default", its class is TEST
  # because "deathray-testing/default" doesn't match the pattern '*prod*' but does match '*test*'.
  #
  # You can define different colors, icons and content expansions for different classes:
  #
  #   typeset -g POWERLEVEL9K_KUBECONTEXT_TEST_FOREGROUND=28
  #   typeset -g POWERLEVEL9K_KUBECONTEXT_TEST_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_KUBECONTEXT_TEST_CONTENT_EXPANSION='> ${P9K_CONTENT} <'
  typeset -g POWERLEVEL9K_KUBECONTEXT_CLASSES=(
      # '*prod*'  PROD    # These values are examples that are unlikely
      # '*test*'  TEST    # to match your needs. Customize them as needed.
      '*'       DEFAULT)
  typeset -g POWERLEVEL9K_KUBECONTEXT_DEFAULT_FOREGROUND=134
  typeset -g POWERLEVEL9K_KUBECONTEXT_DEFAULT_VISUAL_IDENTIFIER_EXPANSION='○'

  # Use POWERLEVEL9K_KUBECONTEXT_CONTENT_EXPANSION to specify the content displayed by kubecontext
  # segment. Parameter expansions are very flexible and fast, too. See reference:
  # http://zsh.sourceforge.net/Doc/Release/Expansion.html#Parameter-Expansion.
  #
  # Within the expansion the following parameters are always available:
  #
  # - P9K_CONTENT                The content that would've been displayed if there was no content
  #                              expansion defined.
  # - P9K_KUBECONTEXT_NAME       The current context's name. Corresponds to column NAME in the
  #                              output of `kubectl config get-contexts`.
  # - P9K_KUBECONTEXT_CLUSTER    The current context's cluster. Corresponds to column CLUSTER in the
  #                              output of `kubectl config get-contexts`.
  # - P9K_KUBECONTEXT_NAMESPACE  The current context's namespace. Corresponds to column NAMESPACE
  #                              in the output of `kubectl config get-contexts`. If there is no
  #                              namespace, the parameter is set to "default".
  # - P9K_KUBECONTEXT_USER       The current context's user. Corresponds to column AUTHINFO in the
  #                              output of `kubectl config get-contexts`.
  #
  # If the context points to Google Kubernetes Engine (GKE) or Elastic Kubernetes Service (EKS),
  # the following extra parameters are available:
  #
  # - P9K_KUBECONTEXT_CLOUD_NAME     Either "gke" or "eks".
  # - P9K_KUBECONTEXT_CLOUD_ACCOUNT  Account/project ID.
  # - P9K_KUBECONTEXT_CLOUD_ZONE     Availability zone.
  # - P9K_KUBECONTEXT_CLOUD_CLUSTER  Cluster.
  #
  # P9K_KUBECONTEXT_CLOUD_* parameters are derived from P9K_KUBECONTEXT_CLUSTER. For example,
  # if P9K_KUBECONTEXT_CLUSTER is "gke_my-account_us-east1-a_my-cluster-01":
  #
  #   - P9K_KUBECONTEXT_CLOUD_NAME=gke
  #   - P9K_KUBECONTEXT_CLOUD_ACCOUNT=my-account
  #   - P9K_KUBECONTEXT_CLOUD_ZONE=us-east1-a
  #   - P9K_KUBECONTEXT_CLOUD_CLUSTER=my-cluster-01
  #
  # If P9K_KUBECONTEXT_CLUSTER is "arn:aws:eks:us-east-1:123456789012:cluster/my-cluster-01":
  #
  #   - P9K_KUBECONTEXT_CLOUD_NAME=eks
  #   - P9K_KUBECONTEXT_CLOUD_ACCOUNT=123456789012
  #   - P9K_KUBECONTEXT_CLOUD_ZONE=us-east-1
  #   - P9K_KUBECONTEXT_CLOUD_CLUSTER=my-cluster-01
  typeset -g POWERLEVEL9K_KUBECONTEXT_DEFAULT_CONTENT_EXPANSION=
  # Show P9K_KUBECONTEXT_CLOUD_CLUSTER if it's not empty and fall back to P9K_KUBECONTEXT_NAME.
  POWERLEVEL9K_KUBECONTEXT_DEFAULT_CONTENT_EXPANSION+='${P9K_KUBECONTEXT_CLOUD_CLUSTER:-${P9K_KUBECONTEXT_NAME}}'
  # Append the current context's namespace if it's not "default".
  POWERLEVEL9K_KUBECONTEXT_DEFAULT_CONTENT_EXPANSION+='${${:-/$P9K_KUBECONTEXT_NAMESPACE}:#/default}'

  # Custom prefix.
  # typeset -g POWERLEVEL9K_KUBECONTEXT_PREFIX='%fat '

  ################[ terraform: terraform workspace (https://www.terraform.io) ]#################
  # Don't show terraform workspace if it's literally "default".
  typeset -g POWERLEVEL9K_TERRAFORM_SHOW_DEFAULT=false
  # POWERLEVEL9K_TERRAFORM_CLASSES is an array with even number of elements. The first element
  # in each pair defines a pattern against which the current terraform workspace gets matched.
  # More specifically, it's P9K_CONTENT prior to the application of context expansion (see below)
  # that gets matched. If you unset all POWERLEVEL9K_TERRAFORM_*CONTENT_EXPANSION parameters,
  # you'll see this value in your prompt. The second element of each pair in
  # POWERLEVEL9K_TERRAFORM_CLASSES defines the workspace class. Patterns are tried in order. The
  # first match wins.
  #
  # For example, given these settings:
  #
  #   typeset -g POWERLEVEL9K_TERRAFORM_CLASSES=(
  #     '*prod*'  PROD
  #     '*test*'  TEST
  #     '*'       OTHER)
  #
  # If your current terraform workspace is "project_test", its class is TEST because "project_test"
  # doesn't match the pattern '*prod*' but does match '*test*'.
  #
  # You can define different colors, icons and content expansions for different classes:
  #
  #   typeset -g POWERLEVEL9K_TERRAFORM_TEST_FOREGROUND=28
  #   typeset -g POWERLEVEL9K_TERRAFORM_TEST_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_TERRAFORM_TEST_CONTENT_EXPANSION='> ${P9K_CONTENT} <'
  typeset -g POWERLEVEL9K_TERRAFORM_CLASSES=(
      # '*prod*'  PROD    # These values are examples that are unlikely
      # '*test*'  TEST    # to match your needs. Customize them as needed.
      '*'         OTHER)
  typeset -g POWERLEVEL9K_TERRAFORM_OTHER_FOREGROUND=38
  # typeset -g POWERLEVEL9K_TERRAFORM_OTHER_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #############[ terraform_version: terraform version (https://www.terraform.io) ]##############
  # Terraform version color.
  typeset -g POWERLEVEL9K_TERRAFORM_VERSION_FOREGROUND=38
  # Custom icon.
  # typeset -g POWERLEVEL9K_TERRAFORM_VERSION_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #[ aws: aws profile (https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-profiles.html) ]#
  # Show aws only when the command you are typing invokes one of these tools.
  # Tip: Remove the next line to always show aws.
  typeset -g POWERLEVEL9K_AWS_SHOW_ON_COMMAND='aws|awless|cdk|terraform|pulumi|terragrunt'

  # POWERLEVEL9K_AWS_CLASSES is an array with even number of elements. The first element
  # in each pair defines a pattern against which the current AWS profile gets matched.
  # More specifically, it's P9K_CONTENT prior to the application of context expansion (see below)
  # that gets matched. If you unset all POWERLEVEL9K_AWS_*CONTENT_EXPANSION parameters,
  # you'll see this value in your prompt. The second element of each pair in
  # POWERLEVEL9K_AWS_CLASSES defines the profile class. Patterns are tried in order. The
  # first match wins.
  #
  # For example, given these settings:
  #
  #   typeset -g POWERLEVEL9K_AWS_CLASSES=(
  #     '*prod*'  PROD
  #     '*test*'  TEST
  #     '*'       DEFAULT)
  #
  # If your current AWS profile is "company_test", its class is TEST
  # because "company_test" doesn't match the pattern '*prod*' but does match '*test*'.
  #
  # You can define different colors, icons and content expansions for different classes:
  #
  #   typeset -g POWERLEVEL9K_AWS_TEST_FOREGROUND=28
  #   typeset -g POWERLEVEL9K_AWS_TEST_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_AWS_TEST_CONTENT_EXPANSION='> ${P9K_CONTENT} <'
  typeset -g POWERLEVEL9K_AWS_CLASSES=(
      # '*prod*'  PROD    # These values are examples that are unlikely
      # '*test*'  TEST    # to match your needs. Customize them as needed.
      '*'       DEFAULT)
  typeset -g POWERLEVEL9K_AWS_DEFAULT_FOREGROUND=208
  # typeset -g POWERLEVEL9K_AWS_DEFAULT_VISUAL_IDENTIFIER_EXPANSION='⭐'

  # AWS segment format. The following parameters are available within the expansion.
  #
  # - P9K_AWS_PROFILE  The name of the current AWS profile.
  # - P9K_AWS_REGION   The region associated with the current AWS profile.
  typeset -g POWERLEVEL9K_AWS_CONTENT_EXPANSION='${P9K_AWS_PROFILE//\%/%%}${P9K_AWS_REGION:+ ${P9K_AWS_REGION//\%/%%}}'

  #[ aws_eb_env: aws elastic beanstalk environment (https://aws.amazon.com/elasticbeanstalk/) ]#
  # AWS Elastic Beanstalk environment color.
  typeset -g POWERLEVEL9K_AWS_EB_ENV_FOREGROUND=70
  # Custom icon.
  typeset -g POWERLEVEL9K_AWS_EB_ENV_VISUAL_IDENTIFIER_EXPANSION='eb'

  ##########[ azure: azure account name (https://docs.microsoft.com/en-us/cli/azure) ]##########
  # Show azure only when the command you are typing invokes one of these tools.
  # Tip: Remove the next line to always show azure.
  typeset -g POWERLEVEL9K_AZURE_SHOW_ON_COMMAND='az|terraform|pulumi|terragrunt'

  # POWERLEVEL9K_AZURE_CLASSES is an array with even number of elements. The first element
  # in each pair defines a pattern against which the current azure account name gets matched.
  # More specifically, it's P9K_CONTENT prior to the application of context expansion (see below)
  # that gets matched. If you unset all POWERLEVEL9K_AZURE_*CONTENT_EXPANSION parameters,
  # you'll see this value in your prompt. The second element of each pair in
  # POWERLEVEL9K_AZURE_CLASSES defines the account class. Patterns are tried in order. The
  # first match wins.
  #
  # For example, given these settings:
  #
  #   typeset -g POWERLEVEL9K_AZURE_CLASSES=(
  #     '*prod*'  PROD
  #     '*test*'  TEST
  #     '*'       OTHER)
  #
  # If your current azure account is "company_test", its class is TEST because "company_test"
  # doesn't match the pattern '*prod*' but does match '*test*'.
  #
  # You can define different colors, icons and content expansions for different classes:
  #
  #   typeset -g POWERLEVEL9K_AZURE_TEST_FOREGROUND=28
  #   typeset -g POWERLEVEL9K_AZURE_TEST_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_AZURE_TEST_CONTENT_EXPANSION='> ${P9K_CONTENT} <'
  typeset -g POWERLEVEL9K_AZURE_CLASSES=(
      # '*prod*'  PROD    # These values are examples that are unlikely
      # '*test*'  TEST    # to match your needs. Customize them as needed.
      '*'         OTHER)

  # Azure account name color.
  typeset -g POWERLEVEL9K_AZURE_OTHER_FOREGROUND=32
  # Custom icon.
  # typeset -g POWERLEVEL9K_AZURE_OTHER_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ##########[ gcloud: google cloud account and project (https://cloud.google.com/) ]###########
  # Show gcloud only when the command you are typing invokes one of these tools.
  # Tip: Remove the next line to always show gcloud.
  typeset -g POWERLEVEL9K_GCLOUD_SHOW_ON_COMMAND='gcloud|gcs|gsutil'
   # Google cloud color.
  typeset -g POWERLEVEL9K_GCLOUD_FOREGROUND=32

  # Google cloud format. Change the value of POWERLEVEL9K_GCLOUD_PARTIAL_CONTENT_EXPANSION and/or
  # POWERLEVEL9K_GCLOUD_COMPLETE_CONTENT_EXPANSION if the default is too verbose or not informative
  # enough. You can use the following parameters in the expansions. Each of them corresponds to the
  # output of `gcloud` tool.
  #
  #   Parameter                | Source
  #   -------------------------|--------------------------------------------------------------------
  #   P9K_GCLOUD_CONFIGURATION | gcloud config configurations list --format='value(name)'
  #   P9K_GCLOUD_ACCOUNT       | gcloud config get-value account
  #   P9K_GCLOUD_PROJECT_ID    | gcloud config get-value project
  #   P9K_GCLOUD_PROJECT_NAME  | gcloud projects describe $P9K_GCLOUD_PROJECT_ID --format='value(name)'
  #
  # Note: ${VARIABLE//\%/%%} expands to ${VARIABLE} with all occurrences of '%' replaced with '%%'.
  #
  # Obtaining project name requires sending a request to Google servers. This can take a long time
  # and even fail. When project name is unknown, P9K_GCLOUD_PROJECT_NAME is not set and gcloud
  # prompt segment is in state PARTIAL. When project name gets known, P9K_GCLOUD_PROJECT_NAME gets
  # set and gcloud prompt segment transitions to state COMPLETE.
  #
  # You can customize the format, icon and colors of gcloud segment separately for states PARTIAL
  # and COMPLETE. You can also hide gcloud in state PARTIAL by setting
  # POWERLEVEL9K_GCLOUD_PARTIAL_VISUAL_IDENTIFIER_EXPANSION and
  # POWERLEVEL9K_GCLOUD_PARTIAL_CONTENT_EXPANSION to empty.
  typeset -g POWERLEVEL9K_GCLOUD_PARTIAL_CONTENT_EXPANSION='${P9K_GCLOUD_PROJECT_ID//\%/%%}'
  typeset -g POWERLEVEL9K_GCLOUD_COMPLETE_CONTENT_EXPANSION='${P9K_GCLOUD_PROJECT_NAME//\%/%%}'

  # Send a request to Google (by means of `gcloud projects describe ...`) to obtain project name
  # this often. Negative value disables periodic polling. In this mode project name is retrieved
  # only when the current configuration, account or project id changes.
  typeset -g POWERLEVEL9K_GCLOUD_REFRESH_PROJECT_NAME_SECONDS=60

  # Custom icon.
  # typeset -g POWERLEVEL9K_GCLOUD_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #[ google_app_cred: google application credentials (https://cloud.google.com/docs/authentication/production) ]#
  # Show google_app_cred only when the command you are typing invokes one of these tools.
  # Tip: Remove the next line to always show google_app_cred.
  typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_SHOW_ON_COMMAND='terraform|pulumi|terragrunt'

  # Google application credentials classes for the purpose of using different colors, icons and
  # expansions with different credentials.
  #
  # POWERLEVEL9K_GOOGLE_APP_CRED_CLASSES is an array with even number of elements. The first
  # element in each pair defines a pattern against which the current kubernetes context gets
  # matched. More specifically, it's P9K_CONTENT prior to the application of context expansion
  # (see below) that gets matched. If you unset all POWERLEVEL9K_GOOGLE_APP_CRED_*CONTENT_EXPANSION
  # parameters, you'll see this value in your prompt. The second element of each pair in
  # POWERLEVEL9K_GOOGLE_APP_CRED_CLASSES defines the context class. Patterns are tried in order.
  # The first match wins.
  #
  # For example, given these settings:
  #
  #   typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_CLASSES=(
  #     '*:*prod*:*'  PROD
  #     '*:*test*:*'  TEST
  #     '*'           DEFAULT)
  #
  # If your current Google application credentials is "service_account deathray-testing x@y.com",
  # its class is TEST because it doesn't match the pattern '* *prod* *' but does match '* *test* *'.
  #
  # You can define different colors, icons and content expansions for different classes:
  #
  #   typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_TEST_FOREGROUND=28
  #   typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_TEST_VISUAL_IDENTIFIER_EXPANSION='⭐'
  #   typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_TEST_CONTENT_EXPANSION='$P9K_GOOGLE_APP_CRED_PROJECT_ID'
  typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_CLASSES=(
      # '*:*prod*:*'  PROD    # These values are examples that are unlikely
      # '*:*test*:*'  TEST    # to match your needs. Customize them as needed.
      '*'             DEFAULT)
  typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_DEFAULT_FOREGROUND=32
  # typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_DEFAULT_VISUAL_IDENTIFIER_EXPANSION='⭐'

  # Use POWERLEVEL9K_GOOGLE_APP_CRED_CONTENT_EXPANSION to specify the content displayed by
  # google_app_cred segment. Parameter expansions are very flexible and fast, too. See reference:
  # http://zsh.sourceforge.net/Doc/Release/Expansion.html#Parameter-Expansion.
  #
  # You can use the following parameters in the expansion. Each of them corresponds to one of the
  # fields in the JSON file pointed to by GOOGLE_APPLICATION_CREDENTIALS.
  #
  #   Parameter                        | JSON key file field
  #   ---------------------------------+---------------
  #   P9K_GOOGLE_APP_CRED_TYPE         | type
  #   P9K_GOOGLE_APP_CRED_PROJECT_ID   | project_id
  #   P9K_GOOGLE_APP_CRED_CLIENT_EMAIL | client_email
  #
  # Note: ${VARIABLE//\%/%%} expands to ${VARIABLE} with all occurrences of '%' replaced by '%%'.
  typeset -g POWERLEVEL9K_GOOGLE_APP_CRED_DEFAULT_CONTENT_EXPANSION='${P9K_GOOGLE_APP_CRED_PROJECT_ID//\%/%%}'

  ##############[ toolbox: toolbox name (https://github.com/containers/toolbox) ]###############
  # Toolbox color.
  typeset -g POWERLEVEL9K_TOOLBOX_FOREGROUND=178
  # Don't display the name of the toolbox if it matches fedora-toolbox-*.
  typeset -g POWERLEVEL9K_TOOLBOX_CONTENT_EXPANSION='${P9K_TOOLBOX_NAME:#fedora-toolbox-*}'
  # Custom icon.
  # typeset -g POWERLEVEL9K_TOOLBOX_VISUAL_IDENTIFIER_EXPANSION='⭐'
  # Custom prefix.
  # typeset -g POWERLEVEL9K_TOOLBOX_PREFIX='%fin '

  ###############################[ public_ip: public IP address ]###############################
  # Public IP color.
  typeset -g POWERLEVEL9K_PUBLIC_IP_FOREGROUND=94
  # Custom icon.
  # typeset -g POWERLEVEL9K_PUBLIC_IP_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ########################[ vpn_ip: virtual private network indicator ]#########################
  # VPN IP color.
  typeset -g POWERLEVEL9K_VPN_IP_FOREGROUND=81
  # When on VPN, show just an icon without the IP address.
  # Tip: To display the private IP address when on VPN, remove the next line.
  typeset -g POWERLEVEL9K_VPN_IP_CONTENT_EXPANSION=
  # Regular expression for the VPN network interface. Run `ifconfig` or `ip -4 a show` while on VPN
  # to see the name of the interface.
  typeset -g POWERLEVEL9K_VPN_IP_INTERFACE='(gpd|wg|(.*tun)|tailscale)[0-9]*|(zt.*)'
  # If set to true, show one segment per matching network interface. If set to false, show only
  # one segment corresponding to the first matching network interface.
  # Tip: If you set it to true, you'll probably want to unset POWERLEVEL9K_VPN_IP_CONTENT_EXPANSION.
  typeset -g POWERLEVEL9K_VPN_IP_SHOW_ALL=false
  # Custom icon.
  # typeset -g POWERLEVEL9K_VPN_IP_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ###########[ ip: ip address and bandwidth usage for a specified network interface ]###########
  # IP color.
  typeset -g POWERLEVEL9K_IP_FOREGROUND=38
  # The following parameters are accessible within the expansion:
  #
  #   Parameter             | Meaning
  #   ----------------------+-------------------------------------------
  #   P9K_IP_IP             | IP address
  #   P9K_IP_INTERFACE      | network interface
  #   P9K_IP_RX_BYTES       | total number of bytes received
  #   P9K_IP_TX_BYTES       | total number of bytes sent
  #   P9K_IP_RX_BYTES_DELTA | number of bytes received since last prompt
  #   P9K_IP_TX_BYTES_DELTA | number of bytes sent since last prompt
  #   P9K_IP_RX_RATE        | receive rate (since last prompt)
  #   P9K_IP_TX_RATE        | send rate (since last prompt)
  typeset -g POWERLEVEL9K_IP_CONTENT_EXPANSION='$P9K_IP_IP${P9K_IP_RX_RATE:+ %70F⇣$P9K_IP_RX_RATE}${P9K_IP_TX_RATE:+ %215F⇡$P9K_IP_TX_RATE}'
  # Show information for the first network interface whose name matches this regular expression.
  # Run `ifconfig` or `ip -4 a show` to see the names of all network interfaces.
  typeset -g POWERLEVEL9K_IP_INTERFACE='[ew].*'
  # Custom icon.
  # typeset -g POWERLEVEL9K_IP_VISUAL_IDENTIFIER_EXPANSION='⭐'

  #########################[ proxy: system-wide http/https/ftp proxy ]##########################
  # Proxy color.
  typeset -g POWERLEVEL9K_PROXY_FOREGROUND=68
  # Custom icon.
  # typeset -g POWERLEVEL9K_PROXY_VISUAL_IDENTIFIER_EXPANSION='⭐'

  ################################[ battery: internal battery ]#################################
  # Show battery in red when it's below this level and not connected to power supply.
  typeset -g POWERLEVEL9K_BATTERY_LOW_THRESHOLD=20
  typeset -g POWERLEVEL9K_BATTERY_LOW_FOREGROUND=160
  # Show battery in green when it's charging or fully charged.
  typeset -g POWERLEVEL9K_BATTERY_{CHARGING,CHARGED}_FOREGROUND=70
  # Show battery in yellow when it's discharging.
  typeset -g POWERLEVEL9K_BATTERY_DISCONNECTED_FOREGROUND=178
  # Battery pictograms going from low to high level of charge.
  typeset -g POWERLEVEL9K_BATTERY_STAGES=('%K{232}▁' '%K{232}▂' '%K{232}▃' '%K{232}▄' '%K{232}▅' '%K{232}▆' '%K{232}▇' '%K{232}█')
  # Don't show the remaining time to charge/discharge.
  typeset -g POWERLEVEL9K_BATTERY_VERBOSE=false

  #####################################[ wifi: wifi speed ]#####################################
  # WiFi color.
  typeset -g POWERLEVEL9K_WIFI_FOREGROUND=68
  # Custom icon.
  # typeset -g POWERLEVEL9K_WIFI_VISUAL_IDENTIFIER_EXPANSION='⭐'

  # Use different colors and icons depending on signal strength ($P9K_WIFI_BARS).
  #
  #   # Wifi colors and icons for different signal strength levels (low to high).
  #   typeset -g my_wifi_fg=(68 68 68 68 68)                           # <-- change these values
  #   typeset -g my_wifi_icon=('WiFi' 'WiFi' 'WiFi' 'WiFi' 'WiFi')     # <-- change these values
  #
  #   typeset -g POWERLEVEL9K_WIFI_CONTENT_EXPANSION='%F{${my_wifi_fg[P9K_WIFI_BARS+1]}}$P9K_WIFI_LAST_TX_RATE Mbps'
  #   typeset -g POWERLEVEL9K_WIFI_VISUAL_IDENTIFIER_EXPANSION='%F{${my_wifi_fg[P9K_WIFI_BARS+1]}}${my_wifi_icon[P9K_WIFI_BARS+1]}'
  #
  # The following parameters are accessible within the expansions:
  #
  #   Parameter             | Meaning
  #   ----------------------+---------------
  #   P9K_WIFI_SSID         | service set identifier, a.k.a. network name
  #   P9K_WIFI_LINK_AUTH    | authentication protocol such as "wpa2-psk" or "none"; empty if unknown
  #   P9K_WIFI_LAST_TX_RATE | wireless transmit rate in megabits per second
  #   P9K_WIFI_RSSI         | signal strength in dBm, from -120 to 0
  #   P9K_WIFI_NOISE        | noise in dBm, from -120 to 0
  #   P9K_WIFI_BARS         | signal strength in bars, from 0 to 4 (derived from P9K_WIFI_RSSI and P9K_WIFI_NOISE)

  ####################################[ time: current time ]####################################
  # Current time color.
  typeset -g POWERLEVEL9K_TIME_FOREGROUND=66
  # Format for the current time: 09:51:02. See `man 3 strftime`.
  typeset -g POWERLEVEL9K_TIME_FORMAT='%D{%I:%M:%S %p}'
  # If set to true, time will update when you hit enter. This way prompts for the past
  # commands will contain the start times of their commands as opposed to the default
  # behavior where they contain the end times of their preceding commands.
  typeset -g POWERLEVEL9K_TIME_UPDATE_ON_COMMAND=false
  # Custom icon.
  typeset -g POWERLEVEL9K_TIME_VISUAL_IDENTIFIER_EXPANSION=
  # Custom prefix.
  # typeset -g POWERLEVEL9K_TIME_PREFIX='%fat '

  # Example of a user-defined prompt segment. Function prompt_example will be called on every
  # prompt if `example` prompt segment is added to POWERLEVEL9K_LEFT_PROMPT_ELEMENTS or
  # POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS. It displays an icon and orange text greeting the user.
  #
  # Type `p10k help segment` for documentation and a more sophisticated example.
  function prompt_example() {
    p10k segment -f 208 -i '⭐' -t 'hello, %n'
  }

  # User-defined prompt segments may optionally provide an instant_prompt_* function. Its job
  # is to generate the prompt segment for display in instant prompt. See
  # https://github.com/romkatv/powerlevel10k#instant-prompt.
  #
  # Powerlevel10k will call instant_prompt_* at the same time as the regular prompt_* function
  # and will record all `p10k segment` calls it makes. When displaying instant prompt, Powerlevel10k
  # will replay these calls without actually calling instant_prompt_*. It is imperative that
  # instant_prompt_* always makes the same `p10k segment` calls regardless of environment. If this
  # rule is not observed, the content of instant prompt will be incorrect.
  #
  # Usually, you should either not define instant_prompt_* or simply call prompt_* from it. If
  # instant_prompt_* is not defined for a segment, the segment won't be shown in instant prompt.
  function instant_prompt_example() {
    # Since prompt_example always makes the same `p10k segment` calls, we can call it from
    # instant_prompt_example. This will give us the same `example` prompt segment in the instant
    # and regular prompts.
    prompt_example
  }

  # User-defined prompt segments can be customized the same way as built-in segments.
  # typeset -g POWERLEVEL9K_EXAMPLE_FOREGROUND=208
  # typeset -g POWERLEVEL9K_EXAMPLE_VISUAL_IDENTIFIER_EXPANSION='⭐'

  # Transient prompt works similarly to the builtin transient_rprompt option. It trims down prompt
  # when accepting a command line. Supported values:
  #
  #   - off:      Don't change prompt when accepting a command line.
  #   - always:   Trim down prompt when accepting a command line.
  #   - same-dir: Trim down prompt when accepting a command line unless this is the first command
  #               typed after changing current working directory.
  typeset -g POWERLEVEL9K_TRANSIENT_PROMPT=always

  # Instant prompt mode.
  #
  #   - off:     Disable instant prompt. Choose this if you've tried instant prompt and found
  #              it incompatible with your zsh configuration files.
  #   - quiet:   Enable instant prompt and don't print warnings when detecting console output
  #              during zsh initialization. Choose this if you've read and understood
  #              https://github.com/romkatv/powerlevel10k#instant-prompt.
  #   - verbose: Enable instant prompt and print a warning when detecting console output during
  #              zsh initialization. Choose this if you've never tried instant prompt, haven't
  #              seen the warning, or if you are unsure what this all means.
  typeset -g POWERLEVEL9K_INSTANT_PROMPT=verbose

  # Hot reload allows you to change POWERLEVEL9K options after Powerlevel10k has been initialized.
  # For example, you can type POWERLEVEL9K_BACKGROUND=red and see your prompt turn red. Hot reload
  # can slow down prompt by 1-2 milliseconds, so it's better to keep it turned off unless you
  # really need it.
  typeset -g POWERLEVEL9K_DISABLE_HOT_RELOAD=true

  # If p10k is already loaded, reload configuration.
  # This works even with POWERLEVEL9K_DISABLE_HOT_RELOAD=true.
  (( ! $+functions[p10k] )) || p10k reload
}

# Tell `p10k configure` which file it should overwrite.
typeset -g POWERLEVEL9K_CONFIG_FILE=${${(%):-%x}:a}

(( ${#p10k_config_opts} )) && setopt ${p10k_config_opts[@]}
'builtin' 'unset' 'p10k_config_opts'
</file>

<file path="apt-packages.txt">
# List of apt packages to install via install.sh
# Lines starting with # or blank lines are ignored.
zsh
ripgrep
</file>

<file path=".github/prompts/deploy.prompt.md">
---
name: deploy
description: Create a deployment checklist and summary
argument-hint: "goal, target, services, credentials, verification"
---

# Deploy Prompt Template

## Goal
Produce a deployment checklist for rolling updated dotfiles, shell plugins, and Copilot prompts onto a local workstation. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Inputs
- Deployment target: A developer machine managed by running ./install.sh followed by scripts/install-prompts.sh (or the prompt step embedded at the end of install.sh). [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Services/components: Apt package bootstrap, Oh My Zsh, Powerlevel10k, zsh-autosuggestions, zsh config symlinks, and prompt templates from github/.github/prompts. [install.sh](install.sh) [github/.github/prompts](github/.github/prompts)
- Required credentials/vars: git and curl for cloning, optional apt-get availability, and environment overrides such as DOTFILES_DIR, COPILOT_PROMPTS_DIR, or CODE_VARIANT. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Steps
1. Verify prerequisites: confirm network access, git/curl presence, apt-get availability (or note macOS skips), and the destination prompt folder (~/Library/Application Support/Code/User/prompts by default). [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
2. Execute ./install.sh from the repo root to install packages, clone zsh plugins, and link configs; allow the script to cascade into scripts/install-prompts.sh. [install.sh](install.sh)
3. Validate the install by checking $HOME symlinks (.zshrc, .p10k.zsh), ensuring prompt files exist at the VS Code path, and confirming Powerlevel10k/zsh-autosuggestions directories were created. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
4. Define rollback/remediation steps: restore *.bak files, remove unwanted symlinks, or re-run ./install.sh after adjusting env vars (e.g., COPILOT_PROMPTS_DIR). [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Output Format
- Summary: Highlight deployment actions, emphasizing installer runs, prompt sync status, and any env overrides. [install.sh](install.sh)
- Commands Run:
  - Document ./install.sh (and any env vars like DOTFILES_DIR or CODE_VARIANT) plus follow-on scripts/install-prompts.sh invocations. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Verification:
  - Capture checks for symlinked configs, plugin directories, and prompt files within the VS Code profile. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Citations: Link to every script or doc referenced while preparing the deployment summary. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [github/.github/prompts](github/.github/prompts)
</file>

<file path=".github/prompts/generate.prompt.md">
---
name: generate
description: Generate repo-specific prompt templates for this repo
---

# Prompt Generator Instructions

Create four sub-agent outputs by filling in the existing template files below. Do **not** create new files or reformat the templates; only replace the placeholder slots inside each file.

## Assignment
- Sub-agent A: `.github/prompts/plan.prompt.md`
- Sub-agent B: `.github/prompts/implement.prompt.md`
- Sub-agent C: `.github/prompts/test.prompt.md`
- Sub-agent D: `.github/prompts/deploy.prompt.md`

## Requirements
- Each sub-agent must fill in the template placeholders with repository-specific details.
- Each sub-agent must cite **specific files and/or commands found in the repo** (e.g., `install.sh`, `apt-packages.txt`, `rg 'pattern' file`, `ls path`).
- Use **exact** commands or file paths from the repository; avoid generic placeholders.
- Keep the existing section headings: Goal, Inputs, Steps, Output Format.
- Do not add new sections or remove any template fields.

## Output
Return the four filled templates (one per sub-agent) with placeholders replaced by concrete repo-specific data and citations.

## Post-generation
Instruct the user to rerun `./install.sh` from the dotfiles repo so the updated prompts sync for future sessions (the script calls `scripts/install-prompts.sh` internally).
</file>

<file path=".github/prompts/implement.prompt.md">
---
name: implement
description: Implement a requested change with file-level details
argument-hint: "goal, targets, behavior, criteria, steps, tests"
---

# Implement Prompt Template

## Goal
Implement the requested change across the dotfiles automation without regressing installer idempotency, shell symlinks, or Copilot prompt sync. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Inputs
- Target files/modules: Expect to edit install.sh, scripts/install-prompts.sh, apt-packages.txt, and any configs or templates mentioned in the request. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [apt-packages.txt](apt-packages.txt) [github/.github/prompts](github/.github/prompts)
- Existing behavior: ./install.sh installs apt dependencies when available, links zsh configs, fetches Powerlevel10k + zsh-autosuggestions, and finishes by running scripts/install-prompts.sh. [install.sh](install.sh) [zsh/.zshrc](zsh/.zshrc)
- Acceptance criteria: The change must remain rerunnable, keep prompt templates current, and document any new flags or files referenced by the installer. [README.md](README.md) [docs/prompts.md](docs/prompts.md)

## Steps
1. Inspect the affected files to confirm current behavior, default variables (DOTFILES_DIR, COPILOT_PROMPTS_DIR), and guardrails like backups. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
2. Apply minimal, well-commented edits that preserve safety checks (e.g., apt-get detection, symlink backups, mkdir -p for prompt destinations). [install.sh](install.sh)
3. Update supporting assets—prompt templates, docs, or shell configs—so guidance matches the new behavior. [docs/prompts.md](docs/prompts.md) [github/.github/prompts](github/.github/prompts)
4. Validate by running ./install.sh (or targeted helpers) locally, capturing output that proves prompts were redeployed and symlinks refreshed. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Output Format
- Summary: Explain the functional change, touched files, and observable differences in installer or prompt flows. [install.sh](install.sh)
- Changes:
  - Describe code edits across install.sh, scripts/install-prompts.sh, and related configs/templates. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
  - Note doc or prompt template updates that keep instructions aligned with the new workflow. [docs/prompts.md](docs/prompts.md) [github/.github/prompts](github/.github/prompts)
- Tests/Checks:
  - Document ./install.sh or scripts/install-prompts.sh runs (with env overrides if used) plus any verification commands. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Citations: Link to every file or command referenced in the implementation summary for traceability. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [docs/prompts.md](docs/prompts.md) [apt-packages.txt](apt-packages.txt) [zsh/.zshrc](zsh/.zshrc)
</file>

<file path=".github/prompts/plan.prompt.md">
---
name: plan
description: Create a repo-specific plan
argument-hint: "goal, context, requirements, constraints"
---

# Plan Prompt Template

## Goal
Develop a concrete plan for modifying the dotfiles bootstrapper while keeping installer flows, shell symlinks, and Copilot prompt generation aligned. [README.md](README.md) [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Inputs
- Repo context: Automation is centralized in install.sh, scripts/install-prompts.sh, apt-packages.txt, and the zsh configs the installer links into $HOME. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [apt-packages.txt](apt-packages.txt) [zsh/.zshrc](zsh/.zshrc)
- Requirements: Plans must cover edits to shell assets, prompt templates under github/.github/prompts, and the rerun workflow via ./install.sh. [README.md](README.md) [github/.github/prompts/generate.prompt.md](github/.github/prompts/generate.prompt.md)
- Constraints: Installers assume macOS-safe prompt destinations, optional apt-get availability, and idempotent reruns that back up existing dotfiles before relinking. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Steps
1. Inspect install.sh, scripts/install-prompts.sh, and related docs to understand how apt installs, zsh symlinks, and prompt publishing currently behave. [install.sh](install.sh) [docs/prompts.md](docs/prompts.md)
2. Map the blast radius for the requested change, noting which configs, prompt templates, or helper scripts require edits. [github/.github/prompts](github/.github/prompts) [zsh](zsh)
3. Propose an ordered execution plan that sequences edits, validation steps (./install.sh or scripts/install-prompts.sh), and documentation updates. [install.sh](install.sh) [README.md](README.md)
4. Call out risks such as overwriting local dotfiles, missing package managers, or stale prompts, and include mitigations like backups or dry runs. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Output Format
- Summary: Tie the proposed work back to installer automation and prompt syncing so owners understand scope and sequencing. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Tasks:
  - Detail file-level edits across install.sh, scripts/install-prompts.sh, and the relevant config or template files. [install.sh](install.sh) [github/.github/prompts](github/.github/prompts)
  - Include verification and follow-up items such as rerunning ./install.sh and reinstalling prompts for future VS Code sessions. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Risks/Notes: Document environment caveats (apt-get availability, macOS prompt paths, symlink backups) so reviewers can plan mitigations. [install.sh](install.sh) [README.md](README.md)
- Citations: Reference every file or doc mentioned in the plan output for traceability. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [README.md](README.md) [docs/prompts.md](docs/prompts.md) [apt-packages.txt](apt-packages.txt) [zsh/.zshrc](zsh/.zshrc)
</file>

<file path=".github/prompts/test.prompt.md">
---
name: test
description: Plan and report test execution for a change
argument-hint: "scope, commands, environment, results"
---

# Test Prompt Template

## Goal
Plan and document validation of dotfiles installer changes, ensuring prompt publishing, symlink updates, and package guardrails behave as expected. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Inputs
- Test scope: Cover any touched scripts (install.sh, scripts/install-prompts.sh), prompt templates, and zsh configs linked into $HOME. [install.sh](install.sh) [github/.github/prompts](github/.github/prompts) [zsh/.zshrc](zsh/.zshrc)
- Commands available: ./install.sh for end-to-end coverage, scripts/install-prompts.sh for direct prompt syncing, plus auxiliary checks such as cat apt-packages.txt or ls ~/Library/Application Support/Code/User/prompts. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [apt-packages.txt](apt-packages.txt)
- Environment notes: macOS defaults to Library/Application Support paths and often lacks apt-get, so tests should capture skipped package installs and any COPILOT_PROMPTS_DIR overrides. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Steps
1. Determine which installer stages need exercising (apt packages, symlink linking, prompt deployment) based on the change request. [install.sh](install.sh)
2. Run the necessary scripts with representative environment variables, capturing stdout/stderr for apt skips, git clones, and prompt symlinks. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
3. Summarize observed results: files linked under $HOME, prompt files created in the VS Code profile, and any generated backups (*.bak). [install.sh](install.sh)
4. Record failures or anomalies (e.g., missing curl, permission errors, incorrect prompt path) along with remediation steps. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)

## Output Format
- Summary: Explain which workflows were exercised and why those tests prove the change is safe. [install.sh](install.sh)
- Commands Run:
  - Include the exact ./install.sh invocation (and flags/env vars) plus supporting commands like ls or tail for verification. [install.sh](install.sh)
  - Capture standalone scripts/install-prompts.sh executions if prompts were the primary focus. [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Results:
  - Report pass/fail outcomes, linking evidence for symlinks, prompt files, or package installations. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh)
- Citations: Link every referenced script, config, or doc cited in the test report. [install.sh](install.sh) [scripts/install-prompts.sh](scripts/install-prompts.sh) [apt-packages.txt](apt-packages.txt) [zsh/.zshrc](zsh/.zshrc)
</file>

<file path=".github/copilot-instructions.md">
# Dotfiles Repository - Copilot Instructions

This is a **personal dotfiles automation repository** optimized for **GitHub Codespaces** (primary) with minimal macOS support (secondary).

## Primary Goal

**Bootstrap cloud development environments (Codespaces) instantly** with:
- Shell configuration (zsh + Oh My Zsh + Powerlevel10k)
- Agentic workflow support (Copilot agents, skills, prompts)
- Git and VS Code configurations
- Zero manual intervention required

## Architecture Philosophy

**Simplicity over flexibility**: Bare git repo approach. Bash-only scripts. Same configuration across all environments (OS-agnostic where possible). No dotfiles managers. No complexity.

**Codespaces-first design**: Everything assumes `/workspaces/.codespaces/.persistedshare/dotfiles` as the clone location. Automatic execution via `install.sh`. Idempotent reruns.

**Agentic workflow strategy**:
- **Universal agents** (`.github/agents/`): Portable across all workspaces (e.g., `readability-reviewer.md`)
- **Universal skills** (`.github/skills/`): Reusable capabilities (e.g., `readability/`)
- **Custom instructions** (`.github/copilot-instructions.md`): Always-on repo guidance
- **Workspace-specific agents**: Generated per-repo via automation (future goal)

## Tech Stack & Commands

**Shell**: `bash` scripts, `zsh` as target shell  
**Package Manager**: `apt-get` (Linux/Codespaces), graceful skip on macOS  
**Frameworks**: Oh My Zsh, Powerlevel10k theme, zsh-autosuggestions

**Primary command**: `./install.sh` (Codespaces auto-runs this)  
**Internal helpers**: `scripts/install-prompts.sh` (invoked by install.sh)

## Project Structure
```
.github/
  agents/              # Universal agents (portable across workspaces)
  skills/              # Universal skills (Copilot + Claude compatible)
  copilot-instructions.md  # This file (always-on guidance)
git/
  .gitconfig          # Git configuration template
scripts/
  install-prompts.sh  # Internal helper for prompt deployment
vscode/
  settings.json       # VS Code user settings (future)
zsh/
  .zshrc             # Zsh configuration
  .p10k.zsh          # Powerlevel10k theme config
apt-packages.txt     # Linux packages to install
install.sh           # PRIMARY ENTRY POINT (Codespaces runs this)
README.md            # Repository philosophy and usage
```

**REMOVED** (cleanup completed):
- `github/.github/prompts/` - Redundant canonical templates
- `.github/prompts/` - Example outputs (not needed in dotfiles repo)
- `docs/prompts.md` - Outdated documentation

## Critical Constraints

**Idempotency**: All scripts must be safely re-runnable. Use checks before installs. Create `.bak` backups before overwriting.

**No user interaction**: Scripts run unattended in Codespaces. No password prompts. Use `sudo` only when `EUID != 0` and `sudo` exists.

**Cross-platform compatibility** (minimal):
- Detect OS via `uname -s` for macOS vs Linux
- Skip apt-get if unavailable (macOS default)
- Use `$HOME` not hardcoded paths
- Detect Codespaces via `$CODESPACES` environment variable

**Package management**:
- `apt-get`: Only install if missing (check with `dpkg -s`)
- `curl` + `git`: Required dependencies
- No homebrew, no cargo, no npm globals (keep scope tight)

## Coding Standards

**Bash scripts**:
- Always start with `#!/usr/bin/env bash`
- Always include `set -euo pipefail` (fail fast, no unset vars, pipe failures)
- Use functions for logical groupings
- Add comments explaining *why*, not *what*
- Use `local` for function variables

**File operations**:
- Check existence before operations (`[ -f ]`, `[ -d ]`)
- Create parent directories before symlinking (`mkdir -p`)
- Backup before replacing (`mv existing existing.bak`)
- Use absolute paths or `$SCRIPT_DIR` relative paths

**Error handling**:
- Exit with error codes on failures
- Echo error messages to stderr (`>&2`)
- Provide actionable error messages

## Agent & Skill Guidelines

**When creating agents** (`.github/agents/*.md`):
- `infer: false` for manual selection (explicit activation)
- `tools: ['read', 'search', 'agent']` for review-only agents
- Include `agent` tool if agent might invoke skills
- Focus on *workflow orchestration*, not specific tasks

**When creating skills** (`.github/skills/*/SKILL.md`):
- Rich `description` with trigger keywords
- Concrete examples with before/after code
- Action-oriented instructions ("do X when Y")
- Include reference files in skill directory when helpful

**When writing instructions** (this file):
- High-level principles and architecture
- Project-wide standards and conventions
- Commands and file paths
- What NOT to do (constraints)

## Current Priorities

1. **Codespaces optimization**: Instant bootstrap experience
2. **Agent/skill ecosystem**: Build universal capabilities (readability review, dotfiles maintenance)
3. **Git/VS Code config**: Establish baseline configurations
4. **Documentation cleanup**: Remove outdated/redundant docs

## Future Considerations (Lower Priority)

- Workspace-specific agent generation workflow
- Additional configuration files (vim, tmux)
- Personal vs work dotfiles separation strategy
- Dotfiles maintenance agents
</file>

<file path="docs/prompts.md">
# Copilot Chat Prompts

This repo ships a reusable prompt generator to create repo-specific prompts. Canonical templates live in [github/.github/prompts](github/.github/prompts); any repo-specific copies should sit under that repo's [.github/prompts](.github/prompts) folder so Copilot Chat can consume them.

## Files

- [github/.github/prompts/generate.prompt.md](github/.github/prompts/generate.prompt.md) — generates repo-specific prompts and instructions for any repo you run it in.
- [.github/prompts](.github/prompts) — sample output produced by running the generator for this dotfiles repo; treat it as an example, not a source of truth for installers.

## Install

Run `./install.sh` from the repo root whenever you want to (re)install prompts. The bootstrapper invokes `scripts/install-prompts.sh` internally after syncing zsh files, so one entry point keeps Copilot prompts and shell config aligned. The helper logs a `Symlinking generate prompt` message with the source and target paths and always sources from [github/.github/prompts](github/.github/prompts).

The installer only publishes the `/generate` prompt into your VS Code user prompt space. When you edit templates inside this repo, rerun `./install.sh` so that `/generate` always reflects the latest canonical instructions. Set `COPILOT_PROMPTS_DIR` if you need to override the default VS Code profile path, and `CODE_VARIANT` when targeting a different VS Code flavor (for example, Insiders).

By default, the generator is symlinked into your VS Code user prompts directory:

- macOS: `~/Library/Application Support/Code/User/prompts`
- Linux: `~/.config/Code/User/prompts`

## Use in Copilot Chat

Open Copilot Chat and use `/generate` to select [github/.github/prompts/generate.prompt.md](github/.github/prompts/generate.prompt.md). The generator copies the canonical templates into the current repo's `.github/prompts/` directory (creating it if missing), gathers repository context, and fills the placeholders for `plan`, `implement`, `test`, and `deploy`. After `/generate` updates a repo, rerun `./install.sh` in dotfiles so the generator you publish for future sessions stays in sync with those changes.
</file>

<file path="scripts/install-prompts.sh">
#!/usr/bin/env bash
set -euo pipefail

REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"
SRC_DIR="$REPO_ROOT/github/.github/prompts"

if [[ ! -d "$SRC_DIR" ]]; then
  echo "Canonical prompt directory not found: $SRC_DIR" >&2
  exit 1
fi

GENERATE_FILE="$SRC_DIR/generate.prompt.md"
if [[ ! -f "$GENERATE_FILE" ]]; then
  echo "Missing generate.prompt.md in $SRC_DIR" >&2
  exit 1
fi

DEST="${COPILOT_PROMPTS_DIR:-}"
if [[ -z "$DEST" ]]; then
  CODE_VARIANT="${CODE_VARIANT:-Code}"
  if [[ "$(uname -s)" == "Darwin" ]]; then
    DEST="$HOME/Library/Application Support/$CODE_VARIANT/User/prompts"
  else
    CONFIG_HOME="${XDG_CONFIG_HOME:-$HOME/.config}"
    DEST="$CONFIG_HOME/$CODE_VARIANT/User/prompts"
  fi
fi

mkdir -p "$DEST"

echo "Deploying prompts from: $SRC_DIR"
echo "Symlinking generate prompt"
echo "  source: $GENERATE_FILE"
echo "  target: $DEST/generate.prompt.md"

ln -sf "$GENERATE_FILE" "$DEST/generate.prompt.md"

cat <<EOF

Published generate.prompt.md to:
  $DEST

Open Copilot Chat and run /generate to scaffold repo prompts.
Set COPILOT_PROMPTS_DIR to override the destination if needed.
EOF
</file>

<file path="README.md">
# Dotfiles

> **Personal dotfiles for instant, consistent development environments**  
> Optimized for GitHub Codespaces. Compatible with macOS.

## Philosophy

**Zero-friction cloud development**: This repository exists to eliminate environment setup time. When I create a new Codespace, everything should "just work" — shell, tools, agents, and configuration — without any manual intervention.

**Simplicity is a feature**: No dotfiles managers. No complex abstractions. Just bash scripts, symlinks, and git. If it requires documentation to understand, it's too complex.

**AI-native workflows**: Development increasingly happens *with* AI agents, not just *for* code. This repo treats agentic workflows (Copilot agents, skills, custom instructions) as first-class citizens alongside traditional shell config.

**Portable universals**: Agents and skills defined here should work across *all* my workspaces. Workspace-specific customization happens elsewhere (generated per-repo or in enterprise dotfiles).

## What This Repo Does

When you create a Codespace with this dotfiles repo configured:

1. **Installs packages** - `zsh`, `ripgrep`, and other essentials (Linux only)
2. **Configures shell** - Sets up zsh with Oh My Zsh, Powerlevel10k theme, and autosuggestions
3. **Links configurations** - Symlinks `.zshrc`, `.p10k.zsh`, `.gitconfig`, VS Code settings
4. **Deploys agentic workflows** - Installs universal Copilot agents and skills

**Total time**: ~30 seconds on a fresh Codespace.  
**Manual steps required**: Zero.

## Quick Start

### For Codespaces (Recommended)

1. **Enable dotfiles in GitHub**:
   - Go to [GitHub Settings → Codespaces](https://github.com/settings/codespaces)
   - Check "Automatically install dotfiles"
   - Select this repository
   
2. **Create any Codespace** - Your dotfiles install automatically

3. **That's it** - New terminals open in zsh with your full configuration

### For Local Mac (Optional)
```bash
git clone https://github.com/YOUR_USERNAME/dotfiles.git ~/dotfiles
cd ~/dotfiles
./install.sh
exec zsh
```

The installer is fully idempotent - safe to run multiple times.

## Repository Structure
```
.github/
  agents/              # Universal Copilot agents (work across all repos)
    readability-reviewer.md
  skills/              # Universal Copilot skills (capabilities for agents)
    readability/
      SKILL.md
  copilot-instructions.md  # Always-on guidance (applies to all tasks)
git/
  .gitconfig          # Git configuration template
scripts/
  install-prompts.sh  # Internal helper for deploying agents/skills
vscode/
  settings.json       # VS Code user settings
zsh/
  .zshrc             # Zsh configuration
  .p10k.zsh          # Powerlevel10k theme configuration
apt-packages.txt     # Linux packages to install
install.sh           # PRIMARY ENTRY POINT (auto-run by Codespaces)
README.md            # You are here
TODO.md              # Prioritized improvement checklist
```

## Agentic Workflow Strategy

This repo implements a three-layer approach to AI-assisted development:

### Layer 1: Custom Instructions (Always-On Guidance)
**File**: `.github/copilot-instructions.md`  
**Purpose**: Project-wide standards that apply to *every* Copilot interaction  
**Scope**: Coding style, architecture notes, build commands, constraints  
**Behavior**: Passive but persistent - automatically loaded

### Layer 2: Skills (Conditional Capabilities)
**Location**: `.github/skills/*/SKILL.md`  
**Purpose**: Reusable, specialized capabilities Copilot loads on-demand  
**Examples**: `readability` (code review heuristics), `shell-scripting` (bash best practices)  
**Behavior**: Copilot decides when to load based on task relevance  
**Portability**: Works across Copilot CLI, coding agent, and VS Code

### Layer 3: Agents (Workflow Orchestrators)
**Location**: `.github/agents/*.md`  
**Purpose**: Named personas that consistently orchestrate tools and skills  
**Examples**: `readability-reviewer` (pre-PR code review), `dotfiles-maintainer` (maintains this repo)  
**Behavior**: Explicitly selected by user (`@readability-reviewer`)  
**When to use**: Repeatable workflows that combine multiple skills/tools

**Key principle**: Custom instructions set the baseline. Skills add capabilities. Agents orchestrate workflows. Use the lightest-weight solution for each need.

## Design Decisions

### Why Codespaces-First?

I develop primarily in cloud environments. Optimizing for Codespaces gives me:
- **Instant setup** - New projects start productive immediately
- **Consistency** - Same environment everywhere, no "works on my machine"
- **Portability** - Work from any device with a browser
- **Disposability** - Tear down and rebuild without fear

Local macOS support exists for occasional offline work, but is not the priority.

### Why Bash-Only Scripts?

Dotfiles managers (chezmoi, stow, yadm) add abstraction that doesn't justify the complexity for my use case. Bash + symlinks + git is:
- **Transparent** - Easy to read, understand, and debug
- **Portable** - Works everywhere without dependencies
- **Simple** - Does exactly what I need, nothing more

If I need templating or secret management later, I'll add it. Until then: YAGNI.

### Why Universal vs Workspace-Specific Agents?

**Universal agents/skills** (in this repo):
- Work across *all* my repositories
- Embody general-purpose capabilities (code review, shell scripting)
- Deployed once, available everywhere

**Workspace-specific agents** (generated per-repo):
- Know about project structure, testing frameworks, deployment patterns
- Generated automatically for each workspace
- Living in workspace `.github/agents/`, not dotfiles repo

This separation keeps dotfiles focused on portable capabilities while allowing per-project specialization.

## How It Works

### On Codespace Creation

1. Codespaces clones this repo to `/workspaces/.codespaces/.persistedshare/dotfiles`
2. Automatically runs `./install.sh`
3. Script installs packages, configures shell, symlinks config files
4. Universal agents/skills deploy to `~/.copilot/` (global scope)

### On Local Mac

1. Manually clone and run `./install.sh`
2. Script detects macOS, skips apt packages gracefully
3. Same shell configuration and agent deployment as Codespaces

### Configuration Management

All configuration lives in this repo, symlinked into `$HOME`:
- `~/.zshrc` → `dotfiles/zsh/.zshrc`
- `~/.p10k.zsh` → `dotfiles/zsh/.p10k.zsh`
- `~/.gitconfig` → `dotfiles/git/.gitconfig`

**Why symlinks?** Changes to dotfiles repo immediately reflect in active environment. No sync needed. One source of truth.

## Customization

### Adding Packages

Edit `apt-packages.txt`, add package names (one per line), rerun `./install.sh`.

### Modifying Shell Config

Edit `zsh/.zshrc` or `zsh/.p10k.zsh`, then reload: `source ~/.zshrc`

### Creating New Agents

1. Create `.github/agents/my-agent.md`
2. Add YAML frontmatter with `name`, `description`, `tools`, `infer`
3. Write agent instructions in markdown body
4. Rerun `./install.sh` to deploy

See [`.github/agents/readability-reviewer.md`](.github/agents/readability-reviewer.md) for example.

### Creating New Skills

1. Create `.github/skills/my-skill/SKILL.md`
2. Add YAML frontmatter with `name`, `description`
3. Write skill instructions, examples, best practices
4. Optionally add scripts/references in skill directory
5. Rerun `./install.sh` to deploy

See [`.github/skills/readability/SKILL.md`](.github/skills/readability/SKILL.md) for example.

## Development Workflow

1. **Make changes** - Edit files in this repo
2. **Test locally** (if possible) - Run `./install.sh` and verify
3. **Commit and push** - Changes go live
4. **Test in fresh Codespace** - Create new Codespace, verify everything works
5. **Iterate** - Fix issues, repeat

For major changes, test in Docker container before pushing:
```bash
docker run -it --rm -v "$(pwd):/dotfiles" ubuntu:24.04 /bin/bash
cd /dotfiles && ./install.sh
```

## Troubleshooting

### Install fails on fresh Codespace

1. Check creation logs: Codespace → "View creation log"
2. Look for errors in install.sh execution
3. SSH into Codespace: `gh codespace ssh`
4. Manually run: `cd /workspaces/.codespaces/.persistedshare/dotfiles && ./install.sh`

### Agents/skills not appearing in Copilot

1. Check `~/.copilot/agents/` and `~/.copilot/skills/` exist
2. Reload VS Code window: `Cmd+Shift+P` → "Reload Window"
3. Check Copilot status: `@workspace /help`
4. Wait 5-10 minutes for indexing

### Shell config changes not applying

1. Verify symlinks: `ls -la ~/.zshrc ~/.p10k.zsh`
2. Reload shell: `source ~/.zshrc` or `exec zsh`
3. Check for errors: `zsh -x -c 'source ~/.zshrc'`

## Contributing

This is a personal repository, but suggestions welcome:
- **Issues**: Report bugs or unexpected behavior
- **Discussions**: Share ideas for improvements
- **Pull requests**: Fix clear bugs (after opening issue first)

Not accepting: Features that add complexity, platform-specific hacks, or third-party dependencies without strong justification.

## License

MIT - Use however you want. Attribution appreciated but not required.

## Inspiration

Built on the shoulders of giants:
- [GitHub's dotfiles guide](https://dotfiles.github.io/)
- [felipecrs/dotfiles](https://github.com/felipecrs/dotfiles)
- [awesome-dotfiles](https://github.com/webpro/awesome-dotfiles)
- [GitHub awesome-copilot](https://github.com/github/awesome-copilot)
- [Anthropic skills](https://github.com/anthropics/skills)
</file>

<file path="zsh/.zshrc">
# Enable Powerlevel10k instant prompt. Should stay close to the top of ~/.zshrc.
# Initialization code that may require console input (password prompts, [y/n]
# confirmations, etc.) must go above this block; everything else may go below.
if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

# If you come from bash you might have to change your $PATH.
# export PATH=$HOME/bin:/usr/local/bin:$PATH

# Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"

# Set name of the theme to load --- if set to "random", it will
# load a random theme each time oh-my-zsh is loaded, in which case,
# to know which specific one was loaded, run: echo $RANDOM_THEME
# See https://github.com/ohmyzsh/ohmyzsh/wiki/Themes
# ZSH_THEME="robbyrussell"
ZSH_THEME="powerlevel10k/powerlevel10k"

# Set list of themes to pick from when loading at random
# Setting this variable when ZSH_THEME=random will cause zsh to load
# a theme from this variable instead of looking in $ZSH/themes/
# If set to an empty array, this variable will have no effect.
# ZSH_THEME_RANDOM_CANDIDATES=( "robbyrussell" "agnoster" )

# Uncomment the following line to use case-sensitive completion.
# CASE_SENSITIVE="true"

# Uncomment the following line to use hyphen-insensitive completion.
# Case-sensitive completion must be off. _ and - will be interchangeable.
# HYPHEN_INSENSITIVE="true"

# Uncomment the following line to disable bi-weekly auto-update checks.
# DISABLE_AUTO_UPDATE="true"

# Uncomment the following line to automatically update without prompting.
# DISABLE_UPDATE_PROMPT="true"

# Uncomment the following line to change how often to auto-update (in days).
# export UPDATE_ZSH_DAYS=13

# Uncomment the following line if pasting URLs and other text is messed up.
# DISABLE_MAGIC_FUNCTIONS="true"

# Uncomment the following line to disable colors in ls.
# DISABLE_LS_COLORS="true"

# Uncomment the following line to disable auto-setting terminal title.
# DISABLE_AUTO_TITLE="true"

# Uncomment the following line to enable command auto-correction.
# ENABLE_CORRECTION="true"

# Uncomment the following line to display red dots whilst waiting for completion.
# COMPLETION_WAITING_DOTS="true"

# Uncomment the following line if you want to disable marking untracked files
# under VCS as dirty. This makes repository status check for large repositories
# much, much faster.
# DISABLE_UNTRACKED_FILES_DIRTY="true"

# Uncomment the following line if you want to change the command execution time
# stamp shown in the history command output.
# You can set one of the optional three formats:
# "mm/dd/yyyy"|"dd.mm.yyyy"|"yyyy-mm-dd"
# or set a custom format using the strftime function format specifications,
# see 'man strftime' for details.
# HIST_STAMPS="mm/dd/yyyy"

# Would you like to use another custom folder than $ZSH/custom?
# ZSH_CUSTOM=/path/to/new-custom-folder

# Which plugins would you like to load?
# Standard plugins can be found in $ZSH/plugins/
# Custom plugins may be added to $ZSH_CUSTOM/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
# Add wisely, as too many plugins slow down shell startup.
plugins=(git macos zsh-autosuggestions)

source $ZSH/oh-my-zsh.sh

# User configuration

# export MANPATH="/usr/local/man:$MANPATH"

# You may need to manually set your language environment
# export LANG=en_US.UTF-8

# Preferred editor for local and remote sessions
# if [[ -n $SSH_CONNECTION ]]; then
#   export EDITOR='vim'
# else
#   export EDITOR='mvim'
# fi

# Compilation flags
# export ARCHFLAGS="-arch x86_64"

# Set personal aliases, overriding those provided by oh-my-zsh libs,
# plugins, and themes. Aliases can be placed here, though oh-my-zsh
# users are encouraged to define aliases within the ZSH_CUSTOM folder.
# For a full list of active aliases, run `alias`.
#
# Example aliases
# alias zshconfig="mate ~/.zshrc"
# alias ohmyzsh="mate ~/.oh-my-zsh"
# Lines configured by zsh-newuser-install
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000
setopt nomatch notify
bindkey -e
# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
# zstyle :compinstall filename '$HOME/.zshrc'

# autoload -Uz compinit
# compinit
# End of lines added by compinstall

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source "$HOME/.p10k.zsh"

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh

export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
export PATH="$HOME/.local/bin:$PATH"
</file>

<file path="install.sh">
#!/usr/bin/env bash
set -euo pipefail

# Dotfiles installer - optimized for GitHub Codespaces
# Safe to run multiple times (idempotent)
# Automatically invoked by Codespaces on container creation

# Determine script directory
# In Codespaces: /workspaces/.codespaces/.persistedshare/dotfiles
# Locally: wherever user cloned the repo
if [ -n "${CODESPACES:-}" ]; then
  SCRIPT_DIR="/workspaces/.codespaces/.persistedshare/dotfiles"
else
  SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
fi

DOTFILES_DIR="${DOTFILES_DIR:-$SCRIPT_DIR}"
APT_PACKAGES_FILE="${APT_PACKAGES_FILE:-$DOTFILES_DIR/apt-packages.txt}"

echo "=============================="
echo "Dotfiles Installation"
echo "=============================="
echo "Script dir: $SCRIPT_DIR"
echo "Dotfiles dir: $DOTFILES_DIR"
echo "Environment: ${CODESPACES:+Codespaces}${CODESPACES:-Local}"
echo ""

# Install apt packages (Linux/Codespaces only)
install_apt_packages() {
  # Skip if no package file
  if [ ! -f "$APT_PACKAGES_FILE" ]; then
    echo "→ No apt packages file found; skipping"
    return
  fi

  # Skip if apt-get unavailable (macOS default)
  if ! command -v apt-get >/dev/null 2>&1; then
    echo "→ apt-get not available; skipping package install (likely macOS)"
    return
  fi

  # Read packages, skip comments/blank lines
  mapfile -t apt_packages < <(sed -e 's/#.*//' -e 's/^[[:space:]]*//' -e '/^$/d' "$APT_PACKAGES_FILE")
  
  if [ "${#apt_packages[@]}" -eq 0 ]; then
    echo "→ No packages listed in $APT_PACKAGES_FILE"
    return
  fi

  # Check which packages are missing
  local missing_packages=()
  for package in "${#apt_packages[@]}"; do
    if ! dpkg -s "$package" >/dev/null 2>&1; then
      missing_packages+=("$package")
    fi
  done

  if [ "${#missing_packages[@]}" -eq 0 ]; then
    echo "✓ All apt packages already installed"
    return
  fi

  echo "→ Installing apt packages: ${missing_packages[*]}"
  
  # Use sudo if available and not root
  if command -v sudo >/dev/null 2>&1 && [ "$EUID" -ne 0 ]; then
    sudo apt-get update -qq
    sudo apt-get install -y -qq "${missing_packages[@]}"
  else
    apt-get update -qq
    apt-get install -y -qq "${missing_packages[@]}"
  fi
  
  echo "✓ Packages installed"
}

# Install Oh My Zsh (if missing)
install_ohmyzsh() {
  if [ -d "$HOME/.oh-my-zsh" ]; then
    echo "✓ Oh My Zsh already installed"
    return
  fi

  if ! command -v curl >/dev/null 2>&1; then
    echo "✗ ERROR: curl is required to install Oh My Zsh" >&2
    exit 1
  fi

  echo "→ Installing Oh My Zsh..."
  
  # Don't start new shell, don't overwrite existing .zshrc
  export RUNZSH=no
  export KEEP_ZSHRC=yes
  
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" || {
    echo "✗ Oh My Zsh installation failed" >&2
    exit 1
  }
  
  echo "✓ Oh My Zsh installed"
}

# Install Powerlevel10k theme (if missing)
install_powerlevel10k() {
  local zsh_custom="${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}"
  local theme_dir="$zsh_custom/themes/powerlevel10k"

  if [ -d "$theme_dir" ]; then
    echo "✓ Powerlevel10k already installed"
    return
  fi

  if ! command -v git >/dev/null 2>&1; then
    echo "✗ ERROR: git is required to install Powerlevel10k" >&2
    exit 1
  fi

  echo "→ Installing Powerlevel10k theme..."
  mkdir -p "$zsh_custom/themes"
  git clone --depth=1 https://github.com/romkatv/powerlevel10k.git "$theme_dir" || {
    echo "✗ Powerlevel10k installation failed" >&2
    exit 1
  }
  
  echo "✓ Powerlevel10k installed"
}

# Install zsh-autosuggestions plugin (if missing)
install_zsh_autosuggestions() {
  local plugin_dir="$HOME/.oh-my-zsh/custom/plugins/zsh-autosuggestions"
  
  if [ -d "$plugin_dir" ]; then
    echo "✓ zsh-autosuggestions already installed"
    return
  fi

  if ! command -v git >/dev/null 2>&1; then
    echo "✗ ERROR: git is required to install zsh-autosuggestions" >&2
    exit 1
  fi

  echo "→ Installing zsh-autosuggestions..."
  git clone https://github.com/zsh-users/zsh-autosuggestions.git "$plugin_dir" || {
    echo "✗ zsh-autosuggestions installation failed" >&2
    exit 1
  }
  
  echo "✓ zsh-autosuggestions installed"
}

# Link dotfiles into home directory
# Args: relative_source_path target_filename
link_file() {
  local src="$DOTFILES_DIR/$1"
  local dest="$HOME/$2"

  if [ ! -e "$src" ]; then
    echo "✗ ERROR: Source file does not exist: $src" >&2
    exit 1
  fi

  # If symlink already points to correct location, skip
  if [ -L "$dest" ] && [ "$(readlink "$dest")" = "$src" ]; then
    echo "✓ Symlink already correct: $dest"
    return
  fi

  # Backup existing file/symlink if present
  if [ -L "$dest" ] || [ -e "$dest" ]; then
    local backup="$dest.bak"
    echo "→ Backing up existing file: $dest → $backup"
    mv "$dest" "$backup"
  fi

  # Create parent directory if needed
  mkdir -p "$(dirname "$dest")"
  
  # Create symlink
  ln -s "$src" "$dest"
  echo "✓ Linked: $dest → $src"
}

# Deploy Copilot prompts to VS Code
deploy_copilot_prompts() {
  echo ""
  echo "→ Deploying Copilot prompts/agents/skills..."
  
  if [ -x "$DOTFILES_DIR/scripts/install-prompts.sh" ]; then
    "$DOTFILES_DIR/scripts/install-prompts.sh"
  else
    echo "⚠ Warning: scripts/install-prompts.sh not found or not executable" >&2
  fi
}

# Main installation flow
main() {
  echo "Starting installation..."
  echo ""
  
  install_apt_packages
  echo ""
  
  install_ohmyzsh
  echo ""
  
  install_powerlevel10k
  echo ""
  
  install_zsh_autosuggestions
  echo ""
  
  echo "→ Linking shell configuration files..."
  link_file "zsh/.zshrc" ".zshrc"
  
  if [ -f "$DOTFILES_DIR/zsh/.p10k.zsh" ]; then
    link_file "zsh/.p10k.zsh" ".p10k.zsh"
  fi
  echo ""
  
  deploy_copilot_prompts
  echo ""
  
  echo "=============================="
  echo "✓ Installation complete!"
  echo "=============================="
  
  if [ -z "${CODESPACES:-}" ]; then
    echo ""
    echo "Next steps:"
    echo "  1. Reload your terminal: exec zsh"
    echo "  2. Configure your GitHub Codespaces settings to use this repo"
  fi
}

# Run installation
main
</file>

</files>
